{
synchronized (lock) {
    Preconditions.checkState(state.accepts(SetupStackSignal.DEPLOY),"Cannot deploy jar while controller in state: " + state);
    state=state.next(SetupStackSignal.DEPLOY);
    lock.notifyAll();
  }
}
