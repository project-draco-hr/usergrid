{
  final UUID application=UUID.randomUUID();
  final UUID entity=UUID.randomUUID();
  final UUID entity2=UUID.randomUUID();
  logger.info("Locking:" + application.toString() + "/"+ entity.toString());
  manager.lock(application,entity);
  manager.lock(application,entity);
  manager.lock(application,entity2);
  logger.info("Cleaning up locks for current thread...");
  manager.cleanupLocksForThread();
  boolean wasLocked=lockInDifferentThread(application,entity);
  Assert.assertEquals(true,wasLocked);
  wasLocked=lockInDifferentThread(application,entity2);
  Assert.assertEquals(true,wasLocked);
}
