{
  final UUID application=UUID.randomUUID();
  final UUID entity=UUID.randomUUID();
  logger.info("Locking:" + application.toString() + "/"+ entity.toString());
  manager.lock(application,entity);
  manager.lock(application,entity);
  boolean wasLocked=lockInDifferentThread(application,entity);
  Assert.assertEquals(false,wasLocked);
  manager.unlock(application,entity);
  wasLocked=lockInDifferentThread(application,entity);
  Assert.assertEquals(false,wasLocked);
  logger.info("Releasing lock:" + application.toString() + "/"+ entity.toString());
  manager.unlock(application,entity);
  wasLocked=lockInDifferentThread(application,entity);
  Assert.assertEquals(true,wasLocked);
}
