{
  UsergridEntity e=new UsergridEntity(collection,name);
  if (fields != null) {
    for (    Map.Entry<String,String> field : fields.entrySet()) {
      e.putProperty(field.getKey(),field.getValue());
    }
  }
  UsergridResponse r=Usergrid.getInstance().POST(e);
  if (r.getResponseError() != null) {
    assertTrue("UUID should not be null",e.getUuid() != null);
    if (fields != null) {
      for (      Map.Entry<String,String> field : fields.entrySet()) {
        assertEquals("attempted to set a property which did not persist on the entity",e.getStringProperty(field.getKey()),field.getValue());
      }
    }
  }
  return r.first();
}
