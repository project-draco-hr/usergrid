{
  final String[] parts=input.split(STORAGE_DELIM);
  Preconditions.checkArgument(parts != null && parts.length == 7,"there must be 5 parts to the serialized query state");
  try {
    String edgeName=parts[1];
    Id edgeId=MAPPER.readValue(parts[2],SimpleId.class);
    SearchEdge.NodeType nodeType=SearchEdge.NodeType.valueOf(parts[3]);
    String[] searchTypes=MAPPER.readValue(parts[4],String[].class);
    SearchTypes types=searchTypes.length == 0 ? SearchTypes.allTypes() : SearchTypes.fromTypes(searchTypes);
    return new QueryState(parts[0],new SearchEdgeImpl(edgeId,edgeName,nodeType),types,Integer.parseInt(parts[5]),Integer.parseInt(parts[6]));
  }
 catch (  Exception jpe) {
    throw new RuntimeException(jpe);
  }
}
