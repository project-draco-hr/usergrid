{
  IndexLocationStrategy indexLocationStrategy=indexLocationStrategyFactory.getIndexLocationStrategy(applicationScope);
  assertEquals(indexLocationStrategy.getIndexRootName(),applicationLocationStrategy.getIndexRootName());
  assertTrue(indexLocationStrategy.getIndexRootName().contains(cassandraFig.getApplicationKeyspace().toLowerCase()));
  assertTrue(indexLocationStrategy.getAlias().getReadAlias().contains(applicationScope.getApplication().getUuid().toString().toLowerCase()));
  assertTrue(indexLocationStrategy.getAlias().getWriteAlias().contains(applicationScope.getApplication().getUuid().toString().toLowerCase()));
  assertTrue(indexLocationStrategy.getAlias().getWriteAlias().contains("write"));
  assertTrue(indexLocationStrategy.getAlias().getReadAlias().contains("read"));
  Set<String> names=new HashSet<>();
  for (int i=0; i < 10; i++) {
    IndexLocationStrategy indexLocationStrategyBucket=new ApplicationIndexLocationStrategy(cassandraFig,indexFig,applicationScope,new ApplicationIndexBucketLocator(indexProcessorFig));
    names.add(indexLocationStrategyBucket.getIndexBucketName());
  }
  String expectedName=cassandraFig.getApplicationKeyspace().toLowerCase() + "_\\d+";
  Pattern regex=Pattern.compile(expectedName);
  assertTrue(names.size() == 1);
  names=new HashSet<>();
  for (int i=0; i < 100; i++) {
    IndexLocationStrategy indexLocationStrategyBucket=new ApplicationIndexLocationStrategy(cassandraFig,indexFig,new ApplicationScopeImpl(CpNamingUtils.generateApplicationId(UUID.randomUUID())),new ApplicationIndexBucketLocator(indexProcessorFig));
    String name=indexLocationStrategyBucket.getIndexBucketName();
    assertTrue("failed to match correct name",regex.matcher(name).matches());
    names.add(name);
  }
  assertTrue(names.size() == indexProcessorFig.getNumberOfIndexBuckets());
}
