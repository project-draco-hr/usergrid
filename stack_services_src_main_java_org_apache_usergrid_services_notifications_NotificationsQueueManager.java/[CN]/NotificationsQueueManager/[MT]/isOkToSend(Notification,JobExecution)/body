{
  String autoExpireAfterString=props.getProperty(PUSH_AUTO_EXPIRE_AFTER_PROPNAME);
  if (autoExpireAfterString != null) {
    pushAutoExpireAfter=Long.parseLong(autoExpireAfterString);
  }
  if (pushAutoExpireAfter != null) {
    if (notification.getCreated() < System.currentTimeMillis() - pushAutoExpireAfter) {
      notification.setExpire(System.currentTimeMillis() - 1L);
    }
  }
  if (notification.getFinished() != null) {
    LOG.info("notification {} already processed. not sending.",notification.getUuid());
    return false;
  }
  if (notification.getCanceled() == Boolean.TRUE) {
    LOG.info("notification {} canceled. not sending.",notification.getUuid());
    return false;
  }
  if (notification.isExpired()) {
    LOG.info("notification {} expired. not sending.",notification.getUuid());
    return false;
  }
  if (jobExecution != null && notification.getDeliver() != null && !notification.getDeliver().equals(jobExecution.getJobData().getProperty("deliver"))) {
    LOG.info("notification {} was rescheduled. not sending.",notification.getUuid());
    return false;
  }
  return true;
}
