{
  if (mapEvent != null) {
    boolean needTypeSet=true;
    if (mapEvent.containsKey("type")) {
      Object typeValue=mapEvent.get("type");
      if (typeValue != null) {
        if (typeValue instanceof String) {
          String typeValueString=(String)typeValue;
          if (typeValueString.equals("event") || typeValueString.equals("events")) {
            needTypeSet=false;
          }
        }
      }
    }
    if (needTypeSet) {
      mapEvent.put("type","events");
    }
    if (!mapEvent.containsKey("timestamp")) {
      mapEvent.put("timestamp","0");
    }
  }
  return createEntity(mapEvent);
}
