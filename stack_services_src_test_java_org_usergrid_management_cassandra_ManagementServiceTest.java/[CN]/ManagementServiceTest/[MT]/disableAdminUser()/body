{
  UUID uuid=UUIDUtils.newTimeUUID();
  Map<String,Object> properties=new LinkedHashMap<String,Object>();
  properties.put("username","test" + uuid);
  properties.put("email",String.format("test%s@anuff.com",uuid));
  EntityManager em=helper.getEntityManagerFactory().getEntityManager(MANAGEMENT_APPLICATION_ID);
  Entity entity=em.create("user",properties);
  assertNotNull(entity);
  User user=em.get(entity.getUuid(),User.class);
  assertFalse(user.activated());
  assertNull(user.getDeactivated());
  managementService.activateAdminUser(user.getUuid());
  user=em.get(entity.getUuid(),User.class);
  assertTrue(user.activated());
  assertNull(user.getDeactivated());
  String token1=managementService.getAccessTokenForAdminUser(user.getUuid(),0);
  String token2=managementService.getAccessTokenForAdminUser(user.getUuid(),0);
  assertNotNull(tokenService.getTokenInfo(token1));
  assertNotNull(tokenService.getTokenInfo(token2));
  managementService.disableAdminUser(user.getUuid());
  user=em.get(entity.getUuid(),User.class);
  assertTrue(user.disabled());
  boolean invalidTokenExcpetion=false;
  try {
    tokenService.getTokenInfo(token1);
  }
 catch (  InvalidTokenException ite) {
    invalidTokenExcpetion=true;
  }
  assertTrue(invalidTokenExcpetion);
  invalidTokenExcpetion=false;
  try {
    tokenService.getTokenInfo(token2);
  }
 catch (  InvalidTokenException ite) {
    invalidTokenExcpetion=true;
  }
  assertTrue(invalidTokenExcpetion);
}
