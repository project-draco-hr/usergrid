{
  EntityManager em=emf.getEntityManager(applicationId);
  Map<String,Object> properties=new LinkedHashMap<String,Object>();
  properties.put("username","realbeast");
  properties.put("email","sungju@softwaregeeks.org");
  Entity user=em.create("user",properties);
  assertNotNull(user);
  UUID userId=user.getUuid();
  String token1=managementService.getAccessTokenForAppUser(applicationId,userId,0);
  String token2=managementService.getAccessTokenForAppUser(applicationId,userId,0);
  assertNotNull(tokenService.getTokenInfo(token1));
  assertNotNull(tokenService.getTokenInfo(token2));
  managementService.revokeAccessTokenForAppUser(token1);
  boolean invalidToken1Excpetion=false;
  try {
    tokenService.getTokenInfo(token1);
  }
 catch (  InvalidTokenException ite) {
    invalidToken1Excpetion=true;
  }
  assertTrue(invalidToken1Excpetion);
  boolean invalidToken2Excpetion=true;
  try {
    tokenService.getTokenInfo(token2);
  }
 catch (  InvalidTokenException ite) {
    invalidToken2Excpetion=false;
  }
  assertTrue(invalidToken2Excpetion);
}
