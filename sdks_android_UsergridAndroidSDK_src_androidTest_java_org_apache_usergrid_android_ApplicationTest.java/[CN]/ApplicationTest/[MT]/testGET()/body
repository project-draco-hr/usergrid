{
  final CountDownLatch signal=new CountDownLatch(1);
  Usergrid.initSharedInstance("rwalsh","sandbox");
  UsergridAsync.GET("books",new UsergridResponseCallback(){
    @Override public void onResponse(    @NotNull UsergridResponse response){
      if (response.ok()) {
        final Book book=(Book)response.first();
        assertNotNull(book);
        assertNotNull(book.getUuid());
        book.setTitle(newBookTitle);
        UsergridEntityAsync.save(book,new UsergridResponseCallback(){
          @Override public void onResponse(          @NotNull UsergridResponse response){
            final Book book=(Book)response.first();
            assertNotNull(book);
            assertNotNull(book.getUuid());
            assertEquals(book.getTitle(),newBookTitle);
            UsergridAsync.GET("book",book.getUuid(),new UsergridResponseCallback(){
              @Override public void onResponse(              @NotNull UsergridResponse response){
                assertNotNull(response.getEntities());
                assertNotNull(response.first());
                finishedBook=(Book)response.first();
                signal.countDown();
              }
            }
);
          }
        }
);
      }
    }
  }
);
  signal.await();
  assertNotNull(finishedBook);
  assertEquals(finishedBook.getTitle(),newBookTitle);
}
