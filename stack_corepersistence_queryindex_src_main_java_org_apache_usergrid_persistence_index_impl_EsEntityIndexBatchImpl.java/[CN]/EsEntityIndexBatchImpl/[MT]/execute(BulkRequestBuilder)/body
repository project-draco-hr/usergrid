{
  if (request.numberOfActions() == 0) {
    return;
  }
  final BulkResponse responses;
  try {
    responses=request.execute().actionGet();
  }
 catch (  Throwable t) {
    logger.error("Unable to communicate with elasticsearch");
    failureMonitor.fail("Unable to execute batch",t);
  }
catch (  Throwable t) {
    log.error("Unable to communicate with elasticsearch");
    failureMonitor.fail("Unable to execute batch",t);
    throw t;
  }
  failureMonitor.success();
  for (  BulkItemResponse response : responses) {
    if (response.isFailed()) {
      throw new RuntimeException("Unable to index documents.  Errors are :" + response.getFailure().getMessage());
    }
  }
  initBatch();
}
