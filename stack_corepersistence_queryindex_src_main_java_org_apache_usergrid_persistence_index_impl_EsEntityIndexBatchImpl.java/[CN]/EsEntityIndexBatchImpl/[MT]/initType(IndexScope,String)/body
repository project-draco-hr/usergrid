{
  if (knownTypes.contains(typeName)) {
    return;
  }
  AdminClient admin=client.admin();
  try {
    XContentBuilder mxcb=EsEntityIndexImpl.createDoubleStringIndexMapping(jsonBuilder(),typeName);
    admin.indices().preparePutMapping(indexName).setType(typeName).setSource(mxcb).execute().actionGet();
    admin.indices().prepareGetMappings(indexName).addTypes(typeName).execute().actionGet();
    knownTypes.add(typeName);
  }
 catch (  IndexAlreadyExistsException ignored) {
  }
catch (  IOException ex) {
    throw new RuntimeException("Exception initializing type " + typeName + " in app "+ applicationScope.getApplication().toString());
  }
}
