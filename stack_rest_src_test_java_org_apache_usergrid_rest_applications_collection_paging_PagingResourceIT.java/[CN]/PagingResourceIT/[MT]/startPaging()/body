{
  CustomCollection things=context.application().customCollection("test2things");
  int size=40;
  List<Map<String,String>> created=new ArrayList<Map<String,String>>(size);
  for (int i=0; i < size; i++) {
    Map<String,String> entity=hashMap("name",String.valueOf(i));
    things.create(entity);
    created.add(entity);
  }
  refreshIndex(context.getOrgName(),context.getAppName());
  ApiResponse response=null;
  UUID start=null;
  int index=0;
  do {
    response=parse(things.get());
    for (    Entity e : response.getEntities()) {
      logger.debug("Getting item {} value {}",index,e.getProperties().get("name").asText());
      assertEquals(created.get(index).get("name"),e.getProperties().get("name").asText());
      index++;
    }
    index--;
    start=response.getEntities().get(response.getEntities().size() - 1).getUuid();
    things=things.withStart(start);
  }
 while (response != null && response.getEntities().size() > 1);
  assertEquals(created.size() - 1,index);
}
