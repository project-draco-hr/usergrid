{
  invocationCounter.inc();
  final TimerContext context=addTimer.time();
  readLock.lock();
  batch.add(count);
  readLock.unlock();
  if (shouldSubmit(batch)) {
    writeLock.lock();
    Batch copy=batch;
    batch=new Batch();
    writeLock.unlock();
    submit(copy);
  }
  context.stop();
}
