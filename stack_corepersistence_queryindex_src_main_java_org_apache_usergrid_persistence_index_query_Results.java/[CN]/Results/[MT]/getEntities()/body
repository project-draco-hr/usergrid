{
  if (entities == null) {
    entities=new ArrayList<Entity>();
    refs=new ArrayList<EntityRef>();
    for (    Id id : ids) {
      Entity entity=ecm.load(id).toBlockingObservable().last();
      if (entity == null) {
        throw new IndexException("Entity id [" + id + "] not found");
      }
      entities.add(entity);
      refs.add(new SimpleEntityRef(entity.getId(),entity.getVersion()));
    }
  }
  return Collections.unmodifiableList(entities);
}
