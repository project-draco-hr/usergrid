{
  if (inTestMode(testMode)) {
    LOG.info("Calling /upload/results in test mode ...");
    LOG.info("{} is {}",RUNNER_HOSTNAME,runnerHostName);
    LOG.info("{} is {}",TEST_CLASS,testClass);
    LOG.info("{} is {}",RUN_ID,runId);
    return Response.status(Response.Status.CREATED).entity(SUCCESSFUL_TEST_MESSAGE).build();
  }
 else {
    LOG.info("/upload/results called ...");
  }
  JSONObject object=(JSONObject)new JSONParser().parse(new InputStreamReader(resultsFileInputStream));
  JSONArray runResults=(JSONArray)object.get("runResults");
  Iterator<JSONObject> iterator=runResults.iterator();
  while (iterator.hasNext()) {
    JSONObject jsonResult=iterator.next();
    BasicRunResult runResult=new BasicRunResult(runId,Util.getInt(jsonResult,"runCount"),Util.getInt(jsonResult,"runTime"),Util.getInt(jsonResult,"ignoreCount"),Util.getInt(jsonResult,"failureCount"));
    if (runResultDao.save(runResult)) {
      LOG.info("Saved run result: {}",runResult);
    }
  }
  return Response.status(Response.Status.CREATED).entity("TRUE").build();
}
