{
  final UUID uuid=UUIDGenerator.newTimeUUID();
  final UUID version=UUIDGenerator.newTimeUUID();
  final String type="test";
  final Id simpleId=new SimpleId(uuid,type);
  Entity entity=new Entity(simpleId);
  FieldUtils.writeDeclaredField(entity,"version",version,true);
  assertEquals(uuid,entity.getId().getUuid());
  assertEquals(type,entity.getId().getType());
  assertEquals(version,entity.getVersion());
  BooleanField boolField=new BooleanField("boolean",false);
  DoubleField doubleField=new DoubleField("double",1d);
  IntegerField intField=new IntegerField("long",1);
  LongField longField=new LongField("int",1l);
  StringField stringField=new StringField("name","test");
  UUIDField uuidField=new UUIDField("uuid",UUIDGenerator.newTimeUUID());
  NullField nullField=new NullField("null");
  entity.setField(boolField);
  entity.setField(doubleField);
  entity.setField(intField);
  entity.setField(longField);
  entity.setField(stringField);
  entity.setField(uuidField);
  entity.setField(nullField);
  Field<Boolean> boolFieldReturned=entity.getField(boolField.getName());
  assertSame(boolField,boolFieldReturned);
  Field<Double> doubleFieldReturned=entity.getField(doubleField.getName());
  assertSame(doubleField,doubleFieldReturned);
  Field<Integer> intFieldReturned=entity.getField(intField.getName());
  assertSame(intField,intFieldReturned);
  Field<Long> longFieldReturned=entity.getField(longField.getName());
  assertSame(longField,longFieldReturned);
  Field<String> stringFieldReturned=entity.getField(stringField.getName());
  assertSame(stringField,stringFieldReturned);
  Field<UUID> uuidFieldReturned=entity.getField(uuidField.getName());
  assertSame(uuidField,uuidFieldReturned);
  Field<Object> nullFieldReturned=entity.getField(nullField.getName());
  assertSame(nullField,nullFieldReturned);
  Set<Field> results=new HashSet<Field>();
  results.addAll(entity.getFields());
  assertTrue(results.contains(boolField));
  assertTrue(results.contains(doubleField));
  assertTrue(results.contains(intField));
  assertTrue(results.contains(longField));
  assertTrue(results.contains(stringField));
  assertTrue(results.contains(uuidField));
  assertTrue(results.contains(nullField));
  assertEquals(7,results.size());
  assertEquals(simpleId,entity.getId());
  assertEquals(version,entity.getVersion());
}
