{
  Object json=body.getEntity();
  String password=null;
  String pin=null;
  Boolean registration_requires_email_confirmation=(Boolean)this.getServices().getEntityManager().getProperty(this.getServices().getApplicationRef(),"registration_requires_email_confirmation");
  if (json instanceof Map) {
    @SuppressWarnings("unchecked") Map<String,Object> map=(Map<String,Object>)json;
    password=(String)map.get("password");
    map.remove("password");
    pin=(String)map.get("pin");
    map.remove("pin");
    map.put("activated",!registration_requires_email_confirmation);
  }
 else   if (json instanceof List) {
    @SuppressWarnings("unchecked") List<Object> list=(List<Object>)json;
    for (    Object obj : list) {
      if (obj instanceof Map) {
        @SuppressWarnings("unchecked") Map<String,Object> map=(Map<String,Object>)obj;
        map.remove("password");
        map.remove("pin");
      }
    }
  }
  ApiResponse response=(ApiResponse)super.executePost(ui,body,callback).getJsonSource();
  if ((response.getEntities() != null) && (response.getEntities().size() == 1)) {
    Entity user=response.getEntities().get(0);
    if (isNotBlank(password)) {
      management.setAppUserPassword(getApplicationId(),user.getUuid(),password);
    }
    if (isNotBlank(pin)) {
      management.setAppUserPin(getApplicationId(),user.getUuid(),pin);
    }
  }
  return new JSONWithPadding(response,callback);
}
