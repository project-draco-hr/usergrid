{
  final TaskExecutor executor=new NamedTaskExecutorImpl("jobSuccess",1);
  final CountDownLatch exceptionLatch=new CountDownLatch(1);
  final CountDownLatch rejectedLatch=new CountDownLatch(0);
  final CountDownLatch runLatch=new CountDownLatch(1);
  final RuntimeException re=new RuntimeException("throwing exception");
  final TestTask<Void> task=new TestTask<Void>(exceptionLatch,rejectedLatch,runLatch){
    @Override public Void executeTask(){
      throw re;
    }
  }
;
  executor.submit(task);
  runLatch.await(1000,TimeUnit.MILLISECONDS);
  exceptionLatch.await(1000,TimeUnit.MILLISECONDS);
  assertSame(re,task.exceptions.get(0));
  assertEquals(0l,rejectedLatch.getCount());
}
