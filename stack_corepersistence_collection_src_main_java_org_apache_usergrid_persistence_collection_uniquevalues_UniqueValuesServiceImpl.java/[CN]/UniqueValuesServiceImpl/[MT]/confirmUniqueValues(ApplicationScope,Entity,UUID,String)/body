{
  if (this.getRequestActorsByRegion().isEmpty()) {
    throw new RuntimeException("Unique values service not initialized, no request actors ready");
  }
  try {
    for (    Field field : entity.getFields()) {
      if (field.isUnique()) {
        confirmUniqueField(scope,entity,version,field,region);
      }
    }
  }
 catch (  UniqueValueException e) {
    for (    Field field : entity.getFields()) {
      try {
        cancelUniqueField(scope,entity,version,field,region);
      }
 catch (      Throwable ignored) {
        logger.debug("Error canceling unique field",ignored);
      }
    }
    throw e;
  }
}
