{
  byte[] mpaBytes=(byte[])message.getObjectProperty(MESSAGE_PROPERTY_APPLICATION_UUID);
  UUID mpaUuid=bytesToUuid(mpaBytes);
  byte[] mpnBytes=(byte[])message.getObjectProperty(MESSAGE_PROPERTY_NOTIFICATION_ID);
  UUID mpnUuid=bytesToUuid(mpnBytes);
  final UUID mpdUuid;
  Object o=message.getObjectProperty(MESSAGE_PROPERTY_DEVICE_UUID);
  if (o instanceof UUID) {
    mpdUuid=(UUID)message.getObjectProperty(MESSAGE_PROPERTY_DEVICE_UUID);
  }
 else {
    byte[] mpdBytes=(byte[])o;
    mpdUuid=bytesToUuid(mpdBytes);
  }
  return new ApplicationQueueMessage(mpaUuid,mpnUuid,mpdUuid,message.getStringProperty(MESSAGE_PROPERTY_NOTIFIER_NAME),message.getStringProperty(MESSAGE_PROPERTY_NOTIFIER_ID));
}
