{
  boolean shouldRun=new Boolean(properties.getProperty("usergrid.notifications.listener.run","true"));
  if (shouldRun) {
    LOG.info("QueueListener: starting.");
    int threadCount=0;
    try {
      sleepBetweenRuns=new Long(properties.getProperty("usergrid.notifications.listener.sleep.between","0")).longValue();
      sleepWhenNoneFound=new Long(properties.getProperty("usergrid.notifications.listener.sleep.after","5000")).longValue();
      batchSize=new Integer(properties.getProperty("usergrid.notifications.listener.batchSize",("" + batchSize)));
      queueName=properties.getProperty(ApplicationQueueManager.DEFAULT_QUEUE_PROPERTY,ApplicationQueueManager.DEFAULT_QUEUE_NAME);
      int maxThreads=new Integer(properties.getProperty("usergrid.notifications.listener.maxThreads",MAX_THREADS));
      futures=new ArrayList<Future>(maxThreads);
      while (threadCount++ < maxThreads) {
        LOG.info("QueueListener: Starting thread {}.",threadCount);
        futures.add(pool.submit(new Runnable(){
          @Override public void run(){
            try {
              execute();
            }
 catch (            Exception e) {
              LOG.error("failed to start push",e);
            }
          }
        }
));
      }
    }
 catch (    Exception e) {
      LOG.error("QueueListener: failed to start:",e);
    }
    LOG.info("QueueListener: done starting.");
  }
 else {
    LOG.info("QueueListener: never started due to config value usergrid.notifications.listener.run.");
  }
}
