{
  startSpring();
  setVerbose(line);
  prepareBaseOutputFileName(line);
  outputDir=createOutputParentDir();
  logger.info("Export directory: {}",outputDir.getAbsolutePath());
  CSVWriter writer=new CSVWriter(new FileWriter(outputDir.getAbsolutePath() + "/admins.csv"),',');
  writer.writeNext(new String[]{"Organization Name","Admin Name","Admin Email","Admin Created Date"});
  List<OrganizationInfo> organizations=managementService.getOrganizations(null,1000000);
  for (  OrganizationInfo organization : organizations) {
    logger.info("Org Name: {} key: {}",organization.getName(),organization.getUuid());
    for (    UserInfo user : managementService.getAdminUsersForOrganization(organization.getUuid())) {
      Entity admin=managementService.getAdminUserEntityByUuid(user.getUuid());
      Long createdDate=(Long)admin.getProperties().get("created");
      writer.writeNext(new String[]{organization.getName(),user.getName(),user.getEmail(),createdDate == null ? "Unknown" : sdf.format(new Date(createdDate))});
    }
  }
  logger.info("Completed export");
  writer.flush();
  writer.close();
}
