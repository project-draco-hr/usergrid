{
  return ApplicationObservable.getAllApplicationIds(managerCache).flatMap(new Func1<Id,Observable<EntityData>>(){
    @Override public Observable<EntityData> call(    final Id applicationId){
      final ApplicationScope applicationScope=new ApplicationScopeImpl(applicationId);
      final GraphManager gm=managerCache.getGraphManager(applicationScope);
      final Observable<Id> entityNodes=TargetIdObservable.getTargetNodes(gm,applicationId);
      final Observable<Id> applicationNode=Observable.just(applicationId);
      return Observable.merge(applicationNode,entityNodes).map(new Func1<Id,EntityData>(){
        @Override public EntityData call(        final Id id){
          return new EntityData(applicationScope,id);
        }
      }
);
    }
  }
);
}
