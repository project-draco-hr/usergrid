{
  return ApplicationObservable.getAllApplicationIds(graphManagerFactory).flatMap(new Func1<Id,Observable<EntityData>>(){
    @Override public Observable<EntityData> call(    final Id id){
      final ApplicationScope applicationScope=new ApplicationScopeImpl(id);
      final GraphManager gm=graphManagerFactory.createEdgeManager(applicationScope);
      final Observable<Id> entityNodes=TargetIdObservable.getTargetNodes(applicationScope,id,gm);
      final Observable<Id> applicationNode=Observable.just(id);
      return Observable.merge(applicationNode,entityNodes).map(new Func1<Id,EntityData>(){
        @Override public EntityData call(        final Id id){
          return new EntityData(applicationScope,id);
        }
      }
);
    }
  }
);
}
