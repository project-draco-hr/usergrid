{
  ANTLRStringStream in=new ANTLRStringStream(ugquery);
  QueryFilterLexer lexer=new QueryFilterLexer(in);
  TokenRewriteStream tokens=new TokenRewriteStream(lexer);
  QueryFilterParser parser=new QueryFilterParser(tokens);
  Query query=parser.ql().query;
  TestQueryVisitor v=new TestQueryVisitor();
  query.getRootOperand().visit(v);
  if (query.isSortSet()) {
    String sep="";
    v.sb.append(" order by ");
    for (    Query.SortPredicate sp : query.getSortPredicates()) {
      String dir=SortDirection.ASCENDING.equals(sp.getDirection()) ? "asc" : "desc";
      v.sb.append(sep).append(sp.getPropertyName()).append(" ").append(dir);
      sep=",";
    }
  }
  String esquery=v.sb.toString();
  logger.info("---------------------------------------------------------------------------");
  logger.info("UG query: " + ugquery);
  logger.info("ES query: " + esquery);
}
