{
  GeocellQueryEngine gqe=new GeocellQueryEngine(){
    @SuppressWarnings("unchecked") @Override public <T>List<T> query(    GeocellQuery baseQuery,    List<String> curGeocellsUnique,    Class<T> entityClass){
      return (List<T>)GeoIndexManager.this.query(key(headEntity.getUuid(),DICTIONARY_LOCATIONS,collectionName,propertyName),curGeocellsUnique,startResult,count,reversed);
    }
  }
;
  List<LocationIndexEntry> locations=null;
  GeocellQuery baseQuery=new GeocellQuery();
  try {
    locations=GeocellManager.proximitySearch(center,maxResults,maxDistance,LocationIndexEntry.class,baseQuery,gqe,GeocellManager.MAX_GEOCELL_RESOLUTION);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  @SuppressWarnings("unchecked") Results results=Results.fromRefList((List<EntityRef>)cast(locations));
  results=em.loadEntities(results,level,count);
  return results;
}
