{
  String collectionName="testEntityProperties" + System.currentTimeMillis();
  String entityName="testEntity1";
  UsergridEntity entity=new UsergridEntity(collectionName,entityName);
  entity.save();
  ArrayList<Object> lenArr=new ArrayList<>();
  lenArr.add(1);
  lenArr.add(2);
  lenArr.add(3);
  lenArr.add(4);
  entity.putProperty("lenArray",lenArr);
  entity.save();
  ArrayList<Object> lenArr2=new ArrayList<>();
  lenArr2.add(6);
  lenArr2.add(7);
  entity.insert("lenArray",lenArr2,6);
  entity.save();
  UsergridEntity eLookUp=Usergrid.GET(collectionName,entityName).first();
  assertNotNull("The entity returned is not null.",eLookUp);
  ArrayNode toCompare=new ArrayNode(JsonNodeFactory.instance);
  toCompare.add(1).add(2).add(3).add(4).add(6).add(7);
  assertEquals("The two arrays should be equal.",eLookUp.getJsonNodeProperty("lenArray"),toCompare);
  lenArr=new ArrayList<>();
  lenArr.add(1);
  lenArr.add(2);
  lenArr.add(3);
  lenArr.add(4);
  entity.putProperty("lenArray",lenArr);
  entity.save();
  lenArr2=new ArrayList<>();
  lenArr2.add(5);
  lenArr2.add(6);
  lenArr2.add(7);
  lenArr2.add(8);
  entity.insert("lenArray",lenArr2,2);
  entity.save();
  eLookUp=Usergrid.GET(collectionName,entityName).first();
  assertNotNull("The entity returned is not null.",eLookUp);
  toCompare=new ArrayNode(JsonNodeFactory.instance);
  toCompare.add(1).add(2).add(5).add(6).add(7).add(8).add(3).add(4);
  assertEquals("The two arrays should be equal.",eLookUp.getJsonNodeProperty("lenArray"),toCompare);
  entity.putProperty("foo","test");
  entity.insert("foo","test1",1);
  entity.save();
  eLookUp=Usergrid.GET(collectionName,entityName).first();
  assertNotNull("The entity returned is not null.",eLookUp);
  toCompare=new ArrayNode(JsonNodeFactory.instance);
  toCompare.add("test").add("test1");
  assertEquals("The two arrays should be equal.",eLookUp.getJsonNodeProperty("foo"),toCompare);
  entity.insert("foo1","test2",1);
  entity.save();
  eLookUp=Usergrid.GET(collectionName,entityName).first();
  assertNotNull("The entity returned is not null.",eLookUp);
  toCompare=new ArrayNode(JsonNodeFactory.instance);
  toCompare.add("test2");
  assertEquals("The two arrays should be equal.",eLookUp.getJsonNodeProperty("foo1"),toCompare);
  entity.putProperty("ArrayIndex","test1");
  entity.insert("ArrayIndex","test2",1000);
  entity.save();
  eLookUp=Usergrid.GET(collectionName,entityName).first();
  assertNotNull("The entity returned is not null.",eLookUp);
  toCompare=new ArrayNode(JsonNodeFactory.instance);
  toCompare.add("test1").add("test2");
  assertEquals("The two arrays should be equal.",eLookUp.getJsonNodeProperty("ArrayIndex"),toCompare);
  entity.insert("ArrayIndex","test3",-1000);
  entity.save();
  eLookUp=Usergrid.GET(collectionName,entityName).first();
  assertNotNull("The entity returned is not null.",eLookUp);
  toCompare=new ArrayNode(JsonNodeFactory.instance);
  toCompare.add("test3").add("test1").add("test2");
  assertEquals("The two arrays should be equal.",eLookUp.getJsonNodeProperty("ArrayIndex"),toCompare);
}
