{
  String collectionName="testEntityProperties" + System.currentTimeMillis();
  String entityOneName="testEntity1";
  String entityTwoName="testEntity2";
  UsergridEntity entityOne=new UsergridEntity(collectionName,entityOneName);
  entityOne.putProperty("color","red");
  entityOne.putProperty("shape","square");
  entityOne.save();
  UsergridEntity entityTwo=new UsergridEntity(collectionName,entityTwoName);
  entityTwo.putProperty("color","green");
  entityTwo.putProperty("shape","circle");
  entityTwo.save();
  assertNotNull(entityOne.getUuid());
  assertNotNull(entityTwo.getUuid());
  assertNotNull(entityOne.getName());
  assertNotNull(entityTwo.getName());
  assertNotNull(entityOne.uuidOrName());
  assertNotNull(entityTwo.uuidOrName());
  entityOne.connect("likes",entityTwo);
  entityOne.save();
  UsergridEntity eLookUpConnectedEntity=entityOne.getConnections(UsergridDirection.OUT,"likes").first();
  assertNotNull("The connected entity returned is not null.",eLookUpConnectedEntity);
  assertEquals("The entity name should be equals.",eLookUpConnectedEntity.getName(),entityTwoName);
  eLookUpConnectedEntity=entityTwo.getConnections(UsergridDirection.IN,"likes").first();
  assertNotNull("The connected entity returned is not null.",eLookUpConnectedEntity);
  assertEquals("The entity name should be equals.",eLookUpConnectedEntity.getName(),entityOneName);
  entityOne.disconnect("likes",entityTwo);
  entityOne.save();
  eLookUpConnectedEntity=entityTwo.getConnections(UsergridDirection.IN,"likes").first();
  assertNull("The entity returned is not null.",eLookUpConnectedEntity);
  Usergrid.connect(entityOne.getType(),entityOne.getUuid(),"visited",entityTwo.getUuid());
  entityOne.save();
  eLookUpConnectedEntity=entityOne.getConnections(UsergridDirection.OUT,"visited").first();
  assertNotNull("The connected entity returned is not null.",eLookUpConnectedEntity);
  assertEquals("The entity name should be equals.",eLookUpConnectedEntity.getName(),entityTwoName);
  Usergrid.disconnect(entityOne.getType(),entityOne.getUuid(),"visited",entityTwo.getUuid());
  entityOne.save();
  eLookUpConnectedEntity=entityOne.getConnections(UsergridDirection.OUT,"visited").first();
  assertNull("The entity returned is not null.",eLookUpConnectedEntity);
  Usergrid.connect(entityOne.getType(),entityOne.getUuid(),"revisit",entityTwo.getType(),entityTwo.getName());
  entityOne.save();
  eLookUpConnectedEntity=entityOne.getConnections(UsergridDirection.OUT,"revisit").first();
  assertNotNull("The connected entity returned is not null.",eLookUpConnectedEntity);
  assertEquals("The entity name should be equals.",eLookUpConnectedEntity.getName(),entityTwoName);
  Usergrid.disconnect(entityOne.getType(),entityOne.getUuid(),"revisit",entityTwo.getType(),entityTwo.getName());
  entityOne.save();
  eLookUpConnectedEntity=entityOne.getConnections(UsergridDirection.OUT,"revisit").first();
  assertNull("The entity returned is not null.",eLookUpConnectedEntity);
}
