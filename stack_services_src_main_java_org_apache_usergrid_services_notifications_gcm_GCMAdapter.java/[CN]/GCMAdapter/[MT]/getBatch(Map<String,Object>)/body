{
synchronized (this) {
    long hash=MurmurHash.hash64(payload);
    Batch batch=batches.get(hash);
    if (batch == null && payload != null) {
      batch=new Batch(notifier,payload);
      batches.put(hash,batch);
    }
    return batch;
  }
}
