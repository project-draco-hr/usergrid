{
  springResource=ConcurrentProcessSingleton.getInstance().getSpringResource();
  if (!enabled) {
    cassandraService=springResource.getBean(CassandraService.class);
    emf=springResource.getBean(EntityManagerFactory.class);
    qmf=springResource.getBean(QueueManagerFactory.class);
    indexBucketLocator=springResource.getBean(IndexBucketLocator.class);
    try {
      springResource.getBean(Injector.class).getInstance(DataMigrationManager.class).migrate();
    }
 catch (    MigrationException e) {
      throw new RuntimeException("Unable to run migration",e);
    }
    enabled=true;
  }
}
