{
  if (status >= 500) {
    logger.error(e.getClass().getCanonicalName() + " 5XX Uncaught Exception (" + status+ ")",e);
  }
 else {
    if (logger.isDebugEnabled()) {
      logger.debug(e.getClass().getCanonicalName() + " Following Exception Thrown (" + status+ ")",e);
    }
  }
  ApiResponse response=new ApiResponse();
  AuthErrorInfo authError=AuthErrorInfo.getForException(e);
  if (authError != null) {
    response.setError(authError.getType(),authError.getMessage(),e);
  }
 else {
    response.setError(e);
  }
  String jsonResponse=mapToJsonString(response);
  return toResponse(status,jsonResponse);
}
