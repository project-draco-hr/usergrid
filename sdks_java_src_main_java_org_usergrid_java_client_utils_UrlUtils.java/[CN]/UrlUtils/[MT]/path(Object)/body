{
  String path="";
  boolean first=true;
  for (  Object segment : segments) {
    if (segment instanceof Object[]) {
      segment=path((Object[])segment);
    }
    if (!isEmpty(segment)) {
      if (first) {
        path=segment.toString();
        first=false;
      }
 else {
        if (!path.endsWith("/")) {
          path+="/";
        }
        path+=segment.toString();
      }
    }
  }
  return path;
}
