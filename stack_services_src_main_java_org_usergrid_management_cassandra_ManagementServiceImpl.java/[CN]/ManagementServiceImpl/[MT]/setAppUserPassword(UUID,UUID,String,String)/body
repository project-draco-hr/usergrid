{
  if ((userId == null)) {
    throw new IllegalArgumentException("userId is required");
  }
  if ((oldPassword == null) || (newPassword == null)) {
    throw new IllegalArgumentException("oldpassword and newpassword are both required");
  }
  if (!checkPassword(oldPassword,readUserPasswordCredentials(applicationId,userId))) {
    logger.info("Old password doesn't match");
    throw new IncorrectPasswordException();
  }
  setAppUserPassword(applicationId,userId,newPassword);
}
