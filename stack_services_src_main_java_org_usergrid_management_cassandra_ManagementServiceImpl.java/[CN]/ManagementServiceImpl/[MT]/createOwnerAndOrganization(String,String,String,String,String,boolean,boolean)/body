{
  Lock groupLock=getUnqiueUpdateLock(lockManager,MANAGEMENT_APPLICATION_ID,organizationName,"groups","path");
  groupLock.lock();
  Lock userLock=getUnqiueUpdateLock(lockManager,MANAGEMENT_APPLICATION_ID,username,"users","username");
  userLock.lock();
  Lock emailLock=getUnqiueUpdateLock(lockManager,MANAGEMENT_APPLICATION_ID,email,"users","email");
  emailLock.lock();
  UserInfo user=null;
  OrganizationInfo organization=null;
  try {
    if (areActivationChecksDisabled()) {
      user=createAdminUser(username,name,email,password,true,false);
    }
 else {
      user=createAdminUser(username,name,email,password,activated,disabled);
    }
    organization=createOrganization(organizationName,user,true);
  }
  finally {
    emailLock.unlock();
    userLock.unlock();
    groupLock.unlock();
  }
  return new OrganizationOwnerInfo(user,organization);
}
