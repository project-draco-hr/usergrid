{
  if ((userId == null) || (password == null)) {
    return false;
  }
  EntityManager em=emf.getEntityManager(MANAGEMENT_APPLICATION_ID);
  User user=em.get(userId,User.class);
  CredentialsInfo credentialsInfo=(CredentialsInfo)em.getDictionaryElementValue(user,DICTIONARY_CREDENTIALS,"password");
  password=maybeSaltPassword(password,user,credentialsInfo);
  if (checkPassword(password,credentialsInfo)) {
    return true;
  }
  logger.info("password compare fail for uuid {}",userId);
  return false;
}
