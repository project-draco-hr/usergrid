{
  final List<IndexOperationMessage> response=new ArrayList<>(takeSize);
  try {
    messages.drainTo(response,takeSize);
    if (response.size() > 0) {
      return response;
    }
    final IndexOperationMessage polled=messages.poll(timeout,timeUnit);
    if (polled != null) {
      response.add(polled);
      messages.drainTo(response,takeSize - 1);
    }
  }
 catch (  InterruptedException e) {
  }
  return response;
}
