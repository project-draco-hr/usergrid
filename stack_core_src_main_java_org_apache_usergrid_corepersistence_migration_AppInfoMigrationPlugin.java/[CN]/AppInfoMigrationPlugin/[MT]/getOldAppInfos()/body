{
  final ApplicationScope appScope=getApplicationScope(CpNamingUtils.SYSTEM_APP_ID);
  final CollectionScope appInfoCollectionScope=new CollectionScopeImpl(appScope.getApplication(),appScope.getApplication(),CpNamingUtils.getCollectionScopeNameFromCollectionName("appinfos"));
  final EntityCollectionManager collectionManager=entityCollectionManagerFactory.createCollectionManager(appInfoCollectionScope);
  final GraphManager gm=graphManagerFactory.createEdgeManager(appScope);
  String edgeType=CpNamingUtils.getEdgeTypeFromCollectionName("appinfos");
  Id rootAppId=appScope.getApplication();
  final SimpleSearchByEdgeType simpleSearchByEdgeType=new SimpleSearchByEdgeType(rootAppId,edgeType,Long.MAX_VALUE,SearchByEdgeType.Order.DESCENDING,null);
  Observable<org.apache.usergrid.persistence.model.entity.Entity> entityObs=gm.loadEdgesFromSource(simpleSearchByEdgeType).flatMap(new Func1<Edge,Observable<org.apache.usergrid.persistence.model.entity.Entity>>(){
    @Override public Observable<org.apache.usergrid.persistence.model.entity.Entity> call(    final Edge edge){
      final Id appInfoId=edge.getTargetNode();
      return collectionManager.load(appInfoId).filter(new Func1<org.apache.usergrid.persistence.model.entity.Entity,Boolean>(){
        @Override public Boolean call(        final org.apache.usergrid.persistence.model.entity.Entity entity){
          if (entity == null) {
            logger.warn("Encountered a null application info for id {}",appInfoId);
            return false;
          }
          return true;
        }
      }
);
    }
  }
);
  return entityObs;
}
