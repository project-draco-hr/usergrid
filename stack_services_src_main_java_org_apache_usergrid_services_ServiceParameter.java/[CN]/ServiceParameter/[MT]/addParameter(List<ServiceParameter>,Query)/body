{
  if (parameters == null) {
    parameters=new ArrayList<ServiceParameter>();
  }
  if (query == null) {
    return parameters;
  }
  if (lastParameterIsQuery(parameters)) {
    logger.error("Adding two queries in a row");
  }
  ServiceParameter p=new QueryParameter(query);
  parameters.add(p);
  return parameters;
}
