{
  String type=entityRef.getId().getType();
  CollectionScope scope=new CollectionScopeImpl(appId,orgId,type);
  EntityCollectionManager ecm=ecmf.createCollectionManager(scope);
  EntityCollectionIndex eci=ecif.createCollectionIndex(scope);
  Entity entity=ecm.load(entityRef.getId()).toBlockingObservable().last();
  entity.setField(new LocationField(fieldName,new Location(lat,lon)));
  entity=ecm.write(entity).toBlockingObservable().last();
  eci.index(entity);
}
