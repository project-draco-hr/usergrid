{
  assertValidApplicationId();
  UUID deviceId=new DeviceUuidFactory(context).getDeviceUuid();
  if (properties == null) {
    properties=new HashMap<String,Object>();
  }
  properties.put("refreshed",System.currentTimeMillis());
  ApiResponse response=apiRequest(HttpMethod.PUT,null,properties,applicationId,"devices",deviceId.toString());
  return response.getFirstEntity(Device.class);
}
