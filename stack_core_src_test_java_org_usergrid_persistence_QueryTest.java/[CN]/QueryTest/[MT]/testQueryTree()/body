{
  logger.info("testQuery");
  Query q=new Query();
  try {
    q.addFilter("blah");
    fail("'blah' shouldn't be a valid operation.");
  }
 catch (  RuntimeException e) {
  }
  q.addFilter("a=5");
  q.addFilter("b='hello'");
  q.addFilter("c < 7");
  q.addFilter("d gt 5");
  q.addFilter("f = 6.0");
  q.addFilter("g = .05");
  q.addFilter("loc within .05 of 5.0,6.0");
  q.addFilter("not h eq 4");
  AndOperand and=(AndOperand)q.getRootOperand();
  NotOperand not=(NotOperand)and.getRight();
  Equal equal=(Equal)not.getOperation();
  assertEquals("h",equal.getProperty().getValue());
  assertEquals(4.0f,((LongLiteral)equal.getLiteral()).getValue(),0);
  and=(AndOperand)and.getLeft();
  WithinOperand op=(WithinOperand)and.getRight();
  assertEquals("loc",op.getProperty().getValue());
  assertEquals(.05f,op.getDistance().getFloatValue(),0);
  assertEquals(5f,op.getLattitude().getFloatValue(),0);
  assertEquals(6f,op.getLongitude().getFloatValue(),0);
  and=(AndOperand)and.getLeft();
  equal=(Equal)and.getRight();
  assertEquals("g",equal.getProperty().getValue());
  assertEquals(.05f,((FloatLiteral)equal.getLiteral()).getValue(),0);
  and=(AndOperand)and.getLeft();
  equal=(Equal)and.getRight();
  assertEquals("f",equal.getProperty().getValue());
  assertEquals(6.0f,((FloatLiteral)equal.getLiteral()).getValue(),0);
  and=(AndOperand)and.getLeft();
  GreaterThan gt=(GreaterThan)and.getRight();
  assertEquals("d",gt.getProperty().getValue());
  assertEquals(5,((LongLiteral)gt.getLiteral()).getValue(),0);
  and=(AndOperand)and.getLeft();
  LessThan lt=(LessThan)and.getRight();
  assertEquals("c",lt.getProperty().getValue());
  assertEquals(7,((LongLiteral)lt.getLiteral()).getValue(),0);
  and=(AndOperand)and.getLeft();
  equal=(Equal)and.getRight();
  assertEquals("b",equal.getProperty().getValue());
  assertEquals("hello",((StringLiteral)equal.getLiteral()).getValue());
  equal=(Equal)and.getLeft();
  assertEquals("a",equal.getProperty().getValue());
  assertEquals(5,((LongLiteral)equal.getLiteral()).getValue().intValue());
}
