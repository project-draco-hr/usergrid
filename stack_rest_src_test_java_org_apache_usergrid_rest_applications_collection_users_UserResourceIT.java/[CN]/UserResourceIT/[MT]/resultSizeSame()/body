{
  UserRepo.INSTANCE.load(resource(),access_token);
  refreshIndex("test-organization","test-app");
  UUID userId1=UserRepo.INSTANCE.getByUserName("user1");
  UUID userId2=UserRepo.INSTANCE.getByUserName("user2");
  UUID userId3=UserRepo.INSTANCE.getByUserName("user3");
  Query query=client.queryUsers();
  ApiResponse response=query.getResponse();
  assertNull("Error was: " + response.getErrorDescription(),response.getError());
  int nonOrderedSize=response.getEntities().size();
  query=client.queryUsers("order by username");
  response=query.getResponse();
  int orderedSize=response.getEntities().size();
  assertEquals("Sizes match",nonOrderedSize,orderedSize);
  int firstEntityIndex=getEntityIndex(userId1,response);
  int secondEntityIndex=getEntityIndex(userId2,response);
  int thirdEntityIndex=getEntityIndex(userId3,response);
  assertTrue("Ordered correctly",firstEntityIndex < secondEntityIndex);
  assertTrue("Ordered correctly",secondEntityIndex < thirdEntityIndex);
}
