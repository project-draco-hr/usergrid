{
  UUID id=UUIDUtils.newTimeUUID();
  String username="username1" + id;
  String name="name1" + id;
  String email="email1" + id + "@usergrid.org";
  User entity=new User(username,name,email,"password");
  entity=new User(usersResource.post(entity));
  refreshIndex();
  UUID firstCreatedId=entity.getUuid();
  username="username2" + id;
  name="name2" + id;
  email="email2" + id + "@usergrid.org";
  entity=new User(username,name,email,"password");
  entity=new User(usersResource.post(entity));
  refreshIndex();
  UUID secondCreatedId=entity.getUuid();
  Entity conn1=usersResource.entity(firstCreatedId.toString()).connection("conn1").entity(secondCreatedId.toString()).post();
  assertEquals(secondCreatedId.toString(),conn1.getUuid().toString());
  refreshIndex();
  Entity conn2=usersResource.entity(firstCreatedId.toString()).connection("conn2").entity(secondCreatedId.toString()).post();
  assertEquals(secondCreatedId.toString(),conn2.getUuid().toString());
  refreshIndex();
  Collection conn1Connections=usersResource.entity(firstCreatedId.toString()).connection("conn1").get();
  assertEquals(secondCreatedId.toString(),((Entity)conn1Connections.getResponse().getEntities().get(0)).getUuid().toString());
  conn1Connections=userResource.entity(firstCreatedId.toString()).connection("conn1").get();
  assertEquals(secondCreatedId.toString(),((Entity)conn1Connections.getResponse().getEntities().get(0)).getUuid().toString());
  Collection conn2Connections=usersResource.entity(firstCreatedId.toString()).connection("conn1").get();
  assertEquals(secondCreatedId.toString(),((Entity)conn2Connections.getResponse().getEntities().get(0)).getUuid().toString());
  conn2Connections=userResource.entity(firstCreatedId.toString()).connection("conn1").get();
  assertEquals(secondCreatedId.toString(),((Entity)conn2Connections.getResponse().getEntities().get(0)).getUuid().toString());
}
