{
  if (tokens.isExternalSSOProviderEnabled()) {
    if (!userServiceAdmin(null)) {
      throw new IllegalArgumentException("Organization / Admin Users must be created via " + properties.getProperty(USERGRID_EXTERNAL_PROVIDER_URL));
    }
  }
  Preconditions.checkArgument(StringUtils.isNotBlank(organizationName),"The organization parameter was missing");
  Preconditions.checkArgument(StringUtils.isNotBlank(organizationName),"The organization parameter was missing");
  if (logger.isDebugEnabled()) {
    logger.debug("New organization: {}",organizationName);
  }
  ApiResponse response=createApiResponse();
  response.setAction("new organization");
  OrganizationOwnerInfo organizationOwner=management.createOwnerAndOrganization(organizationName,username,name,email,password,false,false,userProperties,orgProperties);
  if (organizationOwner == null) {
    logger.info("organizationOwner is null, returning. organization: {}",organizationName);
    return null;
  }
  applicationCreator.createSampleFor(organizationOwner.getOrganization());
  response.setData(organizationOwner);
  response.setSuccess();
  logger.info("New organization complete: {}",organizationName);
  return response;
}
