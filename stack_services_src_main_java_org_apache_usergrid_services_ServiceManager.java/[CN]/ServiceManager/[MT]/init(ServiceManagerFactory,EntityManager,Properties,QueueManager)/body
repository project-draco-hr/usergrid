{
  this.smf=smf;
  this.em=em;
  this.qm=qm;
  this.properties=properties;
  if (em != null) {
    try {
      application=em.getApplication();
      if (application == null) {
        throw new RuntimeException("application is returning null");
      }
      applicationId=application.getUuid();
    }
 catch (    Exception e) {
      logger.error("This should never happen",e);
      throw new RuntimeException(e);
    }
  }
  if (properties != null) {
    String packages=properties.getProperty(SERVICE_PACKAGE_PREFIXES);
    if (!StringUtils.isEmpty(packages)) {
      setServicePackagePrefixes(packages);
    }
  }
  return this;
}
