{
  this.smf=smf;
  this.em=em;
  if (em != null) {
    try {
      application=em.getApplication();
      applicationId=em.getApplicationRef().getUuid();
    }
 catch (    Exception e) {
      logger.error("This should never happen",e);
      throw new RuntimeException(e);
    }
  }
  return this;
}
