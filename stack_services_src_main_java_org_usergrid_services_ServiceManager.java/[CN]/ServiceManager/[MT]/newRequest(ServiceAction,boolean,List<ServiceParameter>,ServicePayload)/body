{
  if (em != null) {
    em.incrementAggregateCounters(null,null,null,"application.requests",1);
    if (action != null) {
      em.incrementAggregateCounters(null,null,null,"application.requests." + action.toString().toLowerCase(),1);
    }
  }
  if (!ServiceParameter.moreParameters(parameters)) {
    return getApplicationRequest(action,returnsTree,parameters,payload);
  }
  if (!ServiceParameter.firstParameterIsName(parameters)) {
    return null;
  }
  String nameParam=ServiceParameter.firstParameter(parameters).getName();
  if (appService.hasEntityCommand(nameParam) || appService.hasEntityDictionary(nameParam)) {
    return getApplicationRequest(action,returnsTree,parameters,payload);
  }
  String serviceName=ServiceParameter.dequeueParameter(parameters).getName();
  return new ServiceRequest(this,action,serviceName,parameters,payload,returnsTree);
}
