{
  final ShardGroupCompaction shardGroupCompaction=mock(ShardGroupCompaction.class);
  final EdgeShardSerialization edgeShardSerialization=mock(EdgeShardSerialization.class);
  final EdgeColumnFamilies edgeColumnFamilies=mock(EdgeColumnFamilies.class);
  final ShardedEdgeSerialization shardedEdgeSerialization=mock(ShardedEdgeSerialization.class);
  final TimeService timeService=mock(TimeService.class);
  NodeShardAllocation approximation=new NodeShardAllocationImpl(edgeShardSerialization,edgeColumnFamilies,shardedEdgeSerialization,timeService,graphFig,shardGroupCompaction);
  final long timeservicetime=System.currentTimeMillis();
  when(timeService.getCurrentTime()).thenReturn(timeservicetime);
  final long expected=timeservicetime - 2 * graphFig.getShardCacheTimeout();
  final long returned=approximation.getMinTime();
  assertEquals("Correct time was returned",expected,returned);
}
