{
  if (properties.getProperty(PROPERTIES_USERGRID_BINARY_UPLOADER).equals("local")) {
    this.binaryStore=localFileBinaryStore;
  }
 else {
    this.binaryStore=awsSdkS3BinaryStore;
  }
  ApiResponse response=createApiResponse();
  response.setAction("get");
  response.setApplication(services.getApplication());
  response.setParams(ui.getQueryParameters());
  ServiceResults serviceResults=executeServiceRequest(ui,response,ServiceAction.GET,null);
  Entity entity=serviceResults.getEntity();
  binaryStore.write(getApplicationId(),entity,uploadedInputStream);
  EntityManager em=emf.getEntityManager(getApplicationId());
  em.update(entity);
  return Response.status(200).build();
}
