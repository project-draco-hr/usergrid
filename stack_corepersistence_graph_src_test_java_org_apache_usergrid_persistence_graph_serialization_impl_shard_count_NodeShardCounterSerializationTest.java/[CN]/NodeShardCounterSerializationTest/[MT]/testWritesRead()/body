{
  final Id id=createId("test");
  ShardKey key1=new ShardKey(scope,new Shard(0,0,false),DirectedEdgeMeta.fromSourceNode(id,"type1"));
  ShardKey key2=new ShardKey(scope,new Shard(0,0,false),DirectedEdgeMeta.fromSourceNode(id,"type2"));
  ShardKey key3=new ShardKey(scope,new Shard(1,0,false),DirectedEdgeMeta.fromSourceNode(id,"type1"));
  Counter counter=new Counter();
  counter.add(key1,1000);
  counter.add(key2,2000);
  counter.add(key3,3000);
  nodeShardCounterSerialization.flush(counter).execute();
  final long time1=nodeShardCounterSerialization.getCount(key1);
  assertEquals(1000,time1);
  final long time2=nodeShardCounterSerialization.getCount(key2);
  assertEquals(2000,time2);
  final long time3=nodeShardCounterSerialization.getCount(key3);
  assertEquals(3000,time3);
}
