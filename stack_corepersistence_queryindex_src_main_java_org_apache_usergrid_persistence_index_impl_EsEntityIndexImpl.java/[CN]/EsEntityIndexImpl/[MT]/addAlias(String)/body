{
  Timer.Context timer=updateAliasTimer.time();
  try {
    Boolean isAck;
    String indexName=indexIdentifier.getIndex(indexSuffix);
    final AdminClient adminClient=esProvider.getClient().admin();
    String[] indexNames=getIndexes(AliasType.Write);
    int count=0;
    IndicesAliasesRequestBuilder aliasesRequestBuilder=adminClient.indices().prepareAliases();
    for (    String currentIndex : indexNames) {
      aliasesRequestBuilder.removeAlias(currentIndex,alias.getWriteAlias());
      count++;
    }
    if (count > 0) {
      isAck=aliasesRequestBuilder.execute().actionGet().isAcknowledged();
      logger.info("Removed Index Name from Alias=[{}] ACK=[{}]",alias,isAck);
    }
    String[] reads=getIndexes(AliasedEntityIndex.AliasType.Read);
    String[] writes=getIndexes(AliasedEntityIndex.AliasType.Write);
    try {
      aliasesRequestBuilder=adminClient.indices().prepareAliases();
      aliasesRequestBuilder.addAlias(indexName,alias.getReadAlias());
      isAck=aliasesRequestBuilder.execute().actionGet().isAcknowledged();
      logger.info("Created new read aliases ACK=[{}]",isAck);
    }
 catch (    InvalidAliasNameException ie) {
      logger.debug("error creating read",ie);
    }
    try {
      aliasesRequestBuilder=adminClient.indices().prepareAliases();
      aliasesRequestBuilder.addAlias(indexName,alias.getWriteAlias());
      isAck=aliasesRequestBuilder.execute().actionGet().isAcknowledged();
      logger.info("Created new write aliases ACK=[{}]",isAck);
    }
 catch (    InvalidAliasNameException ie) {
      logger.debug("error creating write",ie);
    }
    aliasCache.invalidate(alias);
  }
 catch (  Exception e) {
    logger.warn("Failed to create alias ",e);
  }
 finally {
    timer.stop();
  }
}
