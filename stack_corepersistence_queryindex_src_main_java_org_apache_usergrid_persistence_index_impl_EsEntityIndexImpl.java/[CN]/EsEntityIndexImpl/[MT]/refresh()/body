{
  for (int i=0; i < MAX_WAITS; i++) {
    try {
      client.admin().indices().prepareRefresh(indexName).execute().actionGet();
      break;
    }
 catch (    IndexMissingException e) {
      log.error("Unable to refresh index after create. Waiting before sleeping.",e);
    }
    try {
      Thread.sleep(WAIT_TIME);
    }
 catch (    InterruptedException e) {
    }
  }
  log.debug("Refreshed index: " + indexName);
}
