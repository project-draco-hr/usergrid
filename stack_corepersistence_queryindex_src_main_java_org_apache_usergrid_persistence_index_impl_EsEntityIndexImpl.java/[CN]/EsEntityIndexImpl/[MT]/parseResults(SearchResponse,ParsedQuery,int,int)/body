{
  final SearchHits searchHits=searchResponse.getHits();
  final SearchHit[] hits=searchHits.getHits();
  logger.debug("   Hit count: {} Total hits: {}",hits.length,searchHits.getTotalHits());
  List<CandidateResult> candidates=new ArrayList<>(hits.length);
  final boolean isGeo=query.getOriginalQuery().contains("location") && query.getOriginalQuery().contains("within");
  for (  SearchHit hit : hits) {
    CandidateResult candidateResult;
    candidateResult=parseIndexDocId(hit,isGeo);
    candidates.add(candidateResult);
  }
  final CandidateResults candidateResults=new CandidateResults(candidates,query.getSelectFieldMappings());
  if (hits.length >= limit) {
    candidateResults.initializeOffset(from + limit);
  }
  return candidateResults;
}
