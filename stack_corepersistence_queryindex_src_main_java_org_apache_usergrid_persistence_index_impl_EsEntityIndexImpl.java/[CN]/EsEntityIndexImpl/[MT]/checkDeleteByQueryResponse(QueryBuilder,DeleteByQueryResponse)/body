{
  for (  IndexDeleteByQueryResponse indexDeleteByQueryResponse : response) {
    final ShardOperationFailedException[] failures=indexDeleteByQueryResponse.getFailures();
    for (    ShardOperationFailedException failedException : failures) {
      throw new IndexException(String.format("Unable to delete by query %s.  " + "Failed with code %d and reason %s on shard %s in index %s",query.toString(),failedException.status(),failedException.reason(),failedException.shardId(),failedException.index()));
    }
  }
}
