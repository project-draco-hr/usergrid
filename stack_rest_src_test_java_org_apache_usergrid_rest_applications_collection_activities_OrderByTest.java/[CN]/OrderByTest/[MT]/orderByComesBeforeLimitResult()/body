{
  CustomCollection activities=context.collection("activities");
  Map actor=hashMap("displayName","Erin");
  Map props=new HashMap();
  int checkResultsNum=0;
  props.put("actor",actor);
  props.put("verb","go");
  props.put("content","bragh");
  final List<JsonNode> saved=new ArrayList<JsonNode>(20);
  for (int i=0; i < 20; i++) {
    props.put("ordinal",i);
    JsonNode activity=activities.create(props);
    saved.add(getEntity(activity,0));
  }
  String query="select * where created > " + 1 + " order by created desc";
  JsonNode results=activities.withQuery(query).withLimit(5).get();
  assertEquals(5,results.get("entities").size());
  while (checkResultsNum < 5) {
    final JsonNode expected=saved.get(saved.size() - checkResultsNum - 1);
    final JsonNode returned=getEntity(results,checkResultsNum);
    assertEquals(expected,returned);
    checkResultsNum++;
  }
}
