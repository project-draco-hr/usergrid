{
  String[] passwords=new String[]{"password1","password2","password3"};
  UserInfo user=management.createAdminUser("edanuff","Ed Anuff","ed@anuff.com",passwords[0],true,false);
  assertNotNull(user);
  OrganizationInfo organization=management.createOrganization("ed-organization",user,true);
  assertNotNull(organization);
  management.setAdminUserPassword(user.getUuid(),passwords[1]);
  management.setAdminUserPassword(user.getUuid(),passwords[0]);
  Map<String,Object> props=new HashMap<String,Object>();
  props.put(OrganizationInfo.PASSWORD_HISTORY_SIZE_KEY,2);
  organization.setProperties(props);
  management.updateOrganization(organization);
  management.setAdminUserPassword(user.getUuid(),passwords[1]);
  management.setAdminUserPassword(user.getUuid(),passwords[2]);
  try {
    management.setAdminUserPassword(user.getUuid(),passwords[0]);
    fail("No!");
  }
 catch (  RecentlyUsedPasswordException e) {
  }
  try {
    management.setAdminUserPassword(user.getUuid(),passwords[1]);
    fail("No!");
  }
 catch (  RecentlyUsedPasswordException e) {
  }
  management.setAdminUserPassword(user.getUuid(),passwords[2]);
  management.setAdminUserPassword(user.getUuid(),passwords[0]);
  try {
    management.setAdminUserPassword(user.getUuid(),passwords[1]);
    fail("No!");
  }
 catch (  RecentlyUsedPasswordException e) {
  }
}
