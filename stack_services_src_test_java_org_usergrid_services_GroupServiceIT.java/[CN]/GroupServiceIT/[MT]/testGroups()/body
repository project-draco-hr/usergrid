{
  UUID applicationId=createApplication("testOrganization","testGroups");
  ServiceManager sm=setup.getSmf().getServiceManager(applicationId);
  Map<String,Object> properties=new LinkedHashMap<String,Object>();
  properties.put("path","test/test");
  properties.put("title","Test group");
  Entity group=testRequest(sm,ServiceAction.POST,1,properties,"groups").getEntity();
  assertNotNull(group);
  testRequest(sm,ServiceAction.GET,1,null,"groups","test","test");
  testRequest(sm,ServiceAction.GET,0,null,"groups","test","test","messages");
  testRequest(sm,ServiceAction.GET,1,null,"groups");
  properties=new LinkedHashMap<String,Object>();
  properties.put("username","edanuff");
  properties.put("email","ed@anuff.com");
  Entity user=testRequest(sm,ServiceAction.POST,1,properties,"users").getEntity();
  assertNotNull(user);
  testRequest(sm,ServiceAction.GET,0,null,"groups","test","test","users");
  testRequest(sm,ServiceAction.POST,1,null,"groups","test","test","users",user.getUuid());
  testRequest(sm,ServiceAction.GET,1,null,"groups","test","test","users");
  testRequest(sm,ServiceAction.GET,1,null,"users",user.getUuid(),"groups");
  testRequest(sm,ServiceAction.GET,0,null,"users",user.getUuid(),"activities");
  testRequest(sm,ServiceAction.GET,0,null,"groups",group.getUuid(),"users",user.getUuid(),"activities");
}
