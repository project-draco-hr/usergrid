{
  CollectionEndpoint activities=this.app().collection("peeps");
  Entity stuff=new Entity().chainPut("name","chicken").chainPut("type","chicken");
  activities.post(stuff);
  User payload=new User("todd","todd","todd@apigee.com","password");
  this.app().collection("users").post(payload);
  payload=new User("scott","scott","scott@apigee.com","password");
  this.app().collection("users").post(payload);
  refreshIndex();
  Entity entity=this.app().collection("users").entity("todd").connection("likes").collection("peeps").entity("chicken").post();
  assertNotNull(entity);
  refreshIndex();
  Collection collection=this.app().collection("peeps").get();
  String uuid=collection.next().get("uuid").toString();
  try {
    this.app().collection("users").entity("scott").connection("likes").entity(uuid).get();
    fail("We shouldn't be able to see user1 connection through user2");
  }
 catch (  UniformInterfaceException uie) {
    assertEquals(404,uie.getResponse().getStatus());
  }
}
