{
  thingsResource.entity(thing1Id).connection("likes").entity(thing2Id).post();
  thingsResource.entity(thing2Id).connection("likes").entity(thing1Id).post();
  refreshIndex();
  Collection collection=this.app().collection("things").entity(thing1Id).connection("likes").get();
  assertTrue("Connection url returned in entity",collection.hasNext());
  UUID returnedUUID=collection.next().getUuid();
  assertEquals(thing2Id,returnedUUID);
  collection=this.app().collection("things").entity(thing2Id).connection("likes").get();
  UUID returned=collection.next().getUuid();
  assertEquals("Should point to thing1 as an incoming entity connection",thing1Id,returned);
  Entity thing1Return=this.app().collection("things").entity(thing1Id).connection("likes").collection("things").entity(thing2Id).connection("likes").collection("things").entity(thing1Id).get();
  assertEquals(thing1Id,thing1Return.getUuid());
}
