{
  CustomCollection activities=context.collection("peeps");
  Map stuff=hashMap("type","chicken");
  activities.create(stuff);
  Map<String,Object> payload=new LinkedHashMap<String,Object>();
  payload.put("username","todd");
  Map<String,Object> objectOfDesire=new LinkedHashMap<String,Object>();
  objectOfDesire.put("codingmunchies","doritoes");
  resource().path("/test-organization/test-app/users").queryParam("access_token",access_token).accept(MediaType.APPLICATION_JSON).type(MediaType.APPLICATION_JSON_TYPE).post(String.class,payload);
  payload.put("username","scott");
  resource().path("/test-organization/test-app/users").queryParam("access_token",access_token).accept(MediaType.APPLICATION_JSON).type(MediaType.APPLICATION_JSON_TYPE).post(String.class,payload);
  refreshIndex("test-organization","test-app");
  ClientResponse toddWant=resource().path("/test-organization/test-app/users/todd/likes/peeps").queryParam("access_token",access_token).accept(MediaType.TEXT_HTML).type(MediaType.APPLICATION_JSON_TYPE).post(ClientResponse.class,objectOfDesire);
  assertEquals(200,toddWant.getStatus());
  refreshIndex("test-organization","test-app");
  JsonNode node=mapper.readTree(resource().path("/test-organization/test-app/peeps").queryParam("access_token",access_token).accept(MediaType.APPLICATION_JSON).type(MediaType.APPLICATION_JSON_TYPE).get(String.class));
  String uuid=node.get("entities").get(0).get("uuid").textValue();
  try {
    node=mapper.readTree(resource().path("/test-organization/test-app/users/scott/likes/" + uuid).queryParam("access_token",access_token).accept(MediaType.APPLICATION_JSON).type(MediaType.APPLICATION_JSON_TYPE).get(String.class));
    assert(false);
  }
 catch (  UniformInterfaceException uie) {
    assertEquals(404,uie.getResponse().getClientResponseStatus().getStatusCode());
  }
}
