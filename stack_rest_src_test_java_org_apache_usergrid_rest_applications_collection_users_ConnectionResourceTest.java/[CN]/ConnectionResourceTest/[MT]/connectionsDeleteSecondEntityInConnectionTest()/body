{
  CollectionEndpoint things=this.app().collection("things");
  UUID thing1Id=things.post(new Entity().chainPut("name","thing1")).getUuid();
  UUID thing2Id=things.post(new Entity().chainPut("name","thing2")).getUuid();
  refreshIndex();
  things.entity(thing1Id).connection("likes").entity(thing2Id).post();
  ApiResponse response=things.entity("thing2").delete();
  refreshIndex();
  int status=0;
  try {
    Entity node=things.entity("thing2").get();
  }
 catch (  UniformInterfaceException e) {
    status=e.getResponse().getStatus();
  }
  assertEquals(404,status);
}
