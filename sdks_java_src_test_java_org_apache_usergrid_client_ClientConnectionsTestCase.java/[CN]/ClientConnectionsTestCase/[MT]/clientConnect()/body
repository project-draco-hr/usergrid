{
  String collectionName="testClientConnection" + System.currentTimeMillis();
  UsergridEntity entityOne=new UsergridEntity(collectionName,"john");
  entityOne.putProperty("place","San Jose");
  entityOne.save();
  assertNotNull(entityOne.getUuid());
  UsergridEntity entityTwo=new UsergridEntity(collectionName,"amici");
  entityOne.putProperty("place","San Jose");
  entityTwo.save();
  assertNotNull(entityTwo.getUuid());
  Usergrid.connect(entityOne,"likes",entityTwo);
  UsergridEntity responseEntity=Usergrid.getConnections(UsergridDirection.OUT,entityOne,"likes").first();
  assertNotNull(responseEntity);
  assertEquals("both entities name should be same",entityTwo.getName(),responseEntity.getName());
  assertEquals("both entities uuid should be same",entityTwo.getUuid(),responseEntity.getUuid());
  Usergrid.connect(entityOne.getType(),entityOne.getUuid(),"visited",entityTwo.getUuid());
  responseEntity=Usergrid.getConnections(UsergridDirection.OUT,entityOne,"visited").first();
  assertNotNull(responseEntity);
  assertEquals("both entities name should be same",entityTwo.getName(),responseEntity.getName());
  assertEquals("both entities uuid should be same",entityTwo.getUuid(),responseEntity.getUuid());
  Usergrid.connect(entityTwo.getType(),entityTwo.getUuid(),"visitor",entityOne.getUuid());
  responseEntity=Usergrid.getConnections(UsergridDirection.OUT,entityTwo,"visitor").first();
  assertNotNull(responseEntity);
  assertEquals("both entities name should be same",entityOne.getName(),responseEntity.getName());
  assertEquals("both entities uuid should be same",entityOne.getUuid(),responseEntity.getUuid());
  assertNotNull(entityOne.getName());
  assertNotNull(entityTwo.getName());
  Usergrid.connect(entityTwo.getType(),entityTwo.getName(),"welcomed",entityOne.getType(),entityOne.getName());
  responseEntity=Usergrid.getConnections(UsergridDirection.OUT,entityTwo,"welcomed").first();
  assertNotNull(responseEntity);
  assertEquals("both entities name should be same",entityOne.getName(),responseEntity.getName());
  assertEquals("both entities uuid should be same",entityOne.getUuid(),responseEntity.getUuid());
  Usergrid.connect(entityTwo.getType(),entityTwo.getName(),"invalidLink","invalidName");
  responseEntity=Usergrid.getConnections(UsergridDirection.OUT,entityTwo,"invalidLink").first();
  assertNull("response entity should be null.",responseEntity);
}
