{
  checkPermissionsForCollection(context);
  if (!query.hasQueryPredicates() && (query.getEntityType() != null)) {
    Entity entity;
    if (query.containsNameIdentifiersOnly()) {
      String name=query.getSingleNameIdentifier();
      EntityRef ref=em.getAlias(query.getEntityType(),name);
      if (ref == null) {
        throw new ServiceResourceNotFoundException(context);
      }
      entity=em.get(ref);
      if (entity == null) {
        throw new ServiceResourceNotFoundException(context);
      }
    }
 else {
      entity=em.create(query.getEntityType(),context.getProperties());
    }
    entity=importEntity(context,entity);
    createConnection(context.getOwner(),query.getConnectionType(),entity);
    return new ServiceResults(null,context,Type.CONNECTION,Results.fromEntity(entity),null,null);
  }
  return getItemsByQuery(context,query);
}
