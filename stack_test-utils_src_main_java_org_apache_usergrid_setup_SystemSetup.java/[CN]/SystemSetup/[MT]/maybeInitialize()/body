{
  if (lock.tryLock()) {
    new CassandraResource().start();
    new ElasticSearchResource().start();
    SpringResource.getInstance().migrate();
    barrier.proceed();
  }
  barrier.await(ONE_MINUTE);
  if (lock.hasLock()) {
    Runtime.getRuntime().addShutdownHook(new Thread(){
      public void run(){
        System.out.println("Shutdown Hook is running !");
        deleteFile(LOCK_NAME);
        deleteFile(START_BARRIER_NAME);
      }
    }
);
    lock.releaseLock();
  }
}
