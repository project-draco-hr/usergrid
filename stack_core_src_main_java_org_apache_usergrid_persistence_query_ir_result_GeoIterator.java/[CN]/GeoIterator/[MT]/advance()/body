{
  if (done || toReturn != null) {
    return;
  }
  idOrder.clear();
  lastLoaded.clear();
  SearchResults results;
  try {
    results=searcher.proximitySearch(last,lastCellsSearched,center,propertyName,0,distance,resultSize);
  }
 catch (  Exception e) {
    throw new RuntimeException("Unable to search geo locations",e);
  }
  List<EntityLocationRef> locations=results.entityLocations;
  lastCellsSearched=results.lastSearchedGeoCells;
  for (int i=0; i < locations.size(); i++) {
    final EntityLocationRef location=locations.get(i);
    final UUID id=location.getUuid();
    final LocationScanColumn locationScan=new LocationScanColumn(location);
    idOrder.put(id,locationScan);
    lastLoaded.add(locationScan);
    last=location;
  }
  if (locations.size() < resultSize) {
    done=true;
  }
  if (lastLoaded.size() > 0) {
    toReturn=lastLoaded;
  }
}
