{
  log.info("Entering before");
  String esStartup=properties.getProperty("tomcat.startup");
  if ("forked".equals(esStartup)) {
    forkTomcat=true;
  }
 else {
    forkTomcat=false;
  }
synchronized (mutex) {
    clientCount.incrementAndGet();
    if (started) {
      log.info("NOT starting Tomcat because it is already started");
      log.info("Leaving before: {} users of Tomcat",clientCount.get());
      return;
    }
    if (forkTomcat) {
      process=startTomcatProcess();
    }
 else {
      startTomcatEmbedded();
    }
    log.info("Leaving before: Started Tomcat, now {} users",clientCount.get());
  }
}
