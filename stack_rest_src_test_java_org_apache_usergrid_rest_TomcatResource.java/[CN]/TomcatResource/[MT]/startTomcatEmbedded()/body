{
  File dataDir=Files.createTempDir();
  dataDir.deleteOnExit();
  port=AvailablePortFinder.getNextAvailable(9998 + RandomUtils.nextInt(10));
  tomcat=new Tomcat();
  tomcat.setBaseDir(dataDir.getAbsolutePath());
  tomcat.setPort(port);
  tomcat.getConnector().setAttribute("maxThreads","1500");
  tomcat.addWebapp("/",new File(getWebAppsPath()).getAbsolutePath());
  log.info("-----------------------------------------------------------------");
  log.info("Starting Tomcat embedded port {} dir {}",port,dataDir.getAbsolutePath());
  log.info("-----------------------------------------------------------------");
  tomcat.start();
  waitForTomcat();
  mutex.notifyAll();
}
