{
  JsonNode node=client.resource(apiUrl).queryParam("grant_type","urn:pingidentity.com:oauth2:grant_type:validate_bearer").queryParam("client_secret",clientSecret).queryParam("client_id",clientId).queryParam("token",externalToken).type(MediaType.APPLICATION_FORM_URLENCODED_TYPE).header("Content-Length","0").post(JsonNode.class);
  String rawEmail=node.get("access_token").get("subject").asText();
  Map<String,Object> userMap=new HashMap<String,Object>();
  userMap.put("expiration",node.get("expires_in").asLong());
  userMap.put("username",pingUsernameFrom(rawEmail));
  userMap.put("name","pinguser");
  userMap.put("email",rawEmail);
  return userMap;
}
