{
  Map<String,Object> json=new HashMap<String,Object>();
  json.putAll(JsonUtils.toJsonMap(user));
  Map<String,Map<String,Object>> jsonOrganizations=new HashMap<String,Map<String,Object>>();
  json.put("organizations",jsonOrganizations);
  Map<UUID,String> organizations;
  boolean superuser_enabled=getBooleanProperty(PROPERTIES_SYSADMIN_LOGIN_ALLOWED);
  String superuser_username=properties.getProperty(PROPERTIES_SYSADMIN_LOGIN_NAME);
  if (superuser_enabled && (superuser_username != null) && superuser_username.equals(user.getUsername())) {
    organizations=buildOrgBiMap(getOrganizations(null,10));
  }
 else {
    organizations=getOrganizationsForAdminUser(user.getUuid());
  }
  for (  Entry<UUID,String> organization : organizations.entrySet()) {
    Map<String,Object> jsonOrganization=new HashMap<String,Object>();
    jsonOrganizations.put(organization.getValue(),jsonOrganization);
    jsonOrganization.put(PROPERTY_NAME,organization.getValue());
    jsonOrganization.put(PROPERTY_UUID,organization.getKey());
    jsonOrganization.put("properties",getOrganizationByUuid(organization.getKey()).getProperties());
    if (deep) {
      BiMap<UUID,String> applications=getApplicationsForOrganization(organization.getKey());
      jsonOrganization.put("applications",applications.inverse());
      List<UserInfo> users=getAdminUsersForOrganization(organization.getKey());
      Map<String,Object> jsonUsers=new HashMap<String,Object>();
      for (      UserInfo u : users) {
        jsonUsers.put(u.getUsername(),u);
      }
      jsonOrganization.put("users",jsonUsers);
    }
  }
  return json;
}
