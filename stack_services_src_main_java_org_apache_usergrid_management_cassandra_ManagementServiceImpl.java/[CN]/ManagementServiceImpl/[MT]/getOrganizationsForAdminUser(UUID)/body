{
  if (userId == null) {
    return null;
  }
  BiMap<UUID,String> organizations=HashBiMap.create();
  EntityManager em=emf.getEntityManager(smf.getManagementAppId());
  Results results=em.getCollection(new SimpleEntityRef(User.ENTITY_TYPE,userId),Schema.COLLECTION_GROUPS,null,1000,Level.ALL_PROPERTIES,false);
  String path=null;
  do {
    for (    Entity entity : results.getEntities()) {
      path=(String)entity.getProperty(PROPERTY_PATH);
      if (path != null) {
        path=path.toLowerCase();
      }
      organizations.put(entity.getUuid(),path);
    }
    results=results.getNextPageResults();
  }
 while (results != null);
  return organizations;
}
