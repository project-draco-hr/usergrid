{
  UsergridAwsCredentials uac=new UsergridAwsCredentials();
  UUID jobUUID=null;
  String colImport=collection_name;
  Map<String,String> uuidRet=new HashMap<String,String>();
  Map<String,Object> properties;
  Map<String,Object> storage_info;
  try {
    if ((properties=(Map<String,Object>)json.get("properties")) == null) {
      throw new NullPointerException("Could not find 'properties'");
    }
    storage_info=(Map<String,Object>)properties.get("storage_info");
    String storage_provider=(String)properties.get("storage_provider");
    if (storage_provider == null) {
      throw new NullPointerException("Could not find field 'storage_provider'");
    }
    if (storage_info == null) {
      throw new NullPointerException("Could not find field 'storage_info'");
    }
    String bucketName=(String)storage_info.get("bucket_location");
    uac.getAWSAccessKeyIdJson(storage_info);
    uac.getAWSSecretKeyJson(storage_info);
    if (bucketName == null) {
      throw new NullPointerException("Could not find field 'bucketName'");
    }
    json.put("organizationId",organization.getUuid());
    json.put("applicationId",applicationId);
    json.put("collectionName",colImport);
    jobUUID=importService.schedule(json);
    uuidRet.put("Import Entity",jobUUID.toString());
  }
 catch (  NullPointerException e) {
    return Response.status(SC_BAD_REQUEST).type(JSONPUtils.jsonMediaType(callback)).entity(ServiceResource.wrapWithCallback(e.getMessage(),callback)).build();
  }
catch (  Exception e) {
    OAuthResponse errorMsg=OAuthResponse.errorResponse(SC_INTERNAL_SERVER_ERROR).setErrorDescription(e.getMessage()).buildJSONMessage();
    return Response.status(errorMsg.getResponseStatus()).type(JSONPUtils.jsonMediaType(callback)).entity(ServiceResource.wrapWithCallback(errorMsg.getBody(),callback)).build();
  }
  return Response.status(SC_ACCEPTED).entity(uuidRet).build();
}
