{
  super(pageSize);
  this.slice=slice;
  this.em=em;
  this.candidates=candidates;
  this.subSortCompare=new ComparatorChain();
  this.secondaryFields=new ArrayList<String>(1 + secondary.size());
  this.secondaryFields.add(slice.getPropertyName());
  this.subSortCompare.addComparator(new EntityPropertyComparator(slice.getPropertyName(),slice.isReversed()));
  for (  SortPredicate sort : secondary) {
    this.subSortCompare.addComparator(new EntityPropertyComparator(sort.getPropertyName(),sort.getDirection() == Query.SortDirection.DESCENDING));
    this.secondaryFields.add(sort.getPropertyName());
  }
  this.secondaryFields.add(NAME_UUID);
  this.subSortCompare.addComparator(new EntityPropertyComparator(NAME_UUID,false));
  this.generator=new UUIDCursorGenerator<MultiColumnSort>(this.slice.hashCode());
}
