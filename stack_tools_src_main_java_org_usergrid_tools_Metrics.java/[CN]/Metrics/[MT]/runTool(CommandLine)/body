{
  startSpring();
  setVerbose(line);
  prepareBaseOutputFileName(line);
  parseDuration(line);
  applyOrgId(line);
  parseDateRange(line);
  outputDir=createOutputParentDir();
  logger.info("Export directory: {}",outputDir.getAbsolutePath());
  if (orgId == null) {
    organizations=managementService.getOrganizations();
    for (    Map.Entry<UUID,String> organization : organizations.entrySet()) {
      logger.info("Org Name: {} key: {}",organization.getValue(),organization.getKey());
      orgId=organization.getKey();
      applicationsFor(orgId);
    }
  }
 else {
    OrganizationInfo orgInfo=managementService.getOrganizationByUuid(orgId);
    applicationsFor(orgInfo.getUuid());
    organizations=HashBiMap.create(1);
    organizations.put(orgInfo.getUuid(),orgInfo.getName());
  }
  Iterable<UUID> workingOrgs=applyThreshold();
  printReport(MetricSort.APP_REQ_COUNT,workingOrgs);
}
