{
  int count=0;
  File adminUsersFile=new File(importDir,fileName);
  logger.info("----- Loading file: " + adminUsersFile.getAbsolutePath());
  JsonParser jp=getJsonParserForFile(adminUsersFile);
  JsonToken token=jp.nextToken();
  validateStartArray(token);
  EntityManager em=emf.getEntityManager(MANAGEMENT_APPLICATION_ID);
  while (jp.nextValue() != JsonToken.END_ARRAY) {
    @SuppressWarnings("unchecked") Map<String,Object> entityProps=jp.readValueAs(HashMap.class);
    UUID uuid=getId(entityProps);
    String type=getType(entityProps);
    try {
      em.create(uuid,type,entityProps);
      logger.debug("Imported admin user {} {}",uuid,entityProps.get("username"));
      count++;
      if (count % 1000 == 0) {
        logger.info("Imported {} admin users",count);
      }
    }
 catch (    DuplicateUniquePropertyExistsException de) {
      logger.warn("Unable to create entity. It appears to be a duplicate: " + "id={}, type={}, name={}, username={}",new Object[]{uuid,type,entityProps.get("name"),entityProps.get("username")});
      if (logger.isDebugEnabled()) {
        logger.debug("Exception",de);
      }
      continue;
    }
    if (em.get(uuid) == null) {
      logger.error("Holy hell, we wrote an entity and it's missing.  " + "Entity Id was {} and type is {}",uuid,type);
      System.exit(1);
    }
    echo(entityProps);
  }
  logger.info("----- End: Imported {} admin users from file {}",count,adminUsersFile.getAbsolutePath());
  jp.close();
}
