{
synchronized (isOpen) {
    while (isOpen.get() || !buffer.isEmpty()) {
      try {
        String result=buffer.pollLast(waitTime.get(),TimeUnit.MILLISECONDS);
        if (result != null) {
          resultCount.incrementAndGet();
          out.println(result);
        }
      }
 catch (      InterruptedException e) {
        LOG.error("ResultLog thread interrupted.",e);
      }
    }
    isOpen.notifyAll();
  }
}
