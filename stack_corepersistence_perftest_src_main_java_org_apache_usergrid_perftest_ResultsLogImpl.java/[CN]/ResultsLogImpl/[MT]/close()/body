{
  if (isOpen.compareAndSet(true,false)) {
synchronized (isOpen) {
      out.flush();
      out.close();
      thread=null;
    }
  }
}
