{
  UUID applicationId=createApplication("testOrganization","pagingLessThanWithCriteria");
  assertNotNull(applicationId);
  EntityManager em=emf.getEntityManager(applicationId);
  assertNotNull(em);
  int size=40;
  List<UUID> entityIds=new ArrayList<UUID>();
  for (int i=0; i < size; i++) {
    Map<String,Object> properties=new LinkedHashMap<String,Object>();
    properties.put("index",i);
    Entity created=em.create("page",properties);
    entityIds.add(created.getUuid());
  }
  int pageSize=10;
  Query query=new Query();
  query.setLimit(pageSize);
  query.addFilter("index < " + size * 2);
  Results r=null;
  for (int i=0; i < size / pageSize; i++) {
    r=em.searchCollection(em.getApplicationRef(),"pages",query);
    for (    Entry<UUID,Map<String,Object>> entry : r.metadata.entrySet()) {
      Map<String,Object> map=entry.getValue();
      if (map != null) {
        assertFalse(map.containsKey(Schema.PROPERTY_CURSOR));
      }
    }
    logger.info(JsonUtils.mapToFormattedJsonString(r.getEntities()));
    assertEquals(pageSize,r.size());
    for (int j=0; j < pageSize; j++) {
      assertEquals(entityIds.get(i * pageSize + j),r.getEntities().get(j).getUuid());
    }
    query.setCursor(r.getCursor());
  }
  assertNull(r.getCursor());
}
