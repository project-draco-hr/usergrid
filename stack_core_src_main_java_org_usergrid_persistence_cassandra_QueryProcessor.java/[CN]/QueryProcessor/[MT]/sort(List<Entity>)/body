{
  if ((entities != null) && (sorts.size() > 0)) {
    logger.info("Performing in-memory sort of " + entities.size() + " entities");
    ComparatorChain chain=new ComparatorChain();
    for (    SortPredicate sort : sorts) {
      chain.addComparator(new EntityPropertyComparator(sort.getPropertyName()),sort.getDirection() == SortDirection.DESCENDING);
    }
    Collections.sort(entities,chain);
  }
  return entities;
}
