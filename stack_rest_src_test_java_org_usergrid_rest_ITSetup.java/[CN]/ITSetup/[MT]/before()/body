{
synchronized (cassandraResource) {
    super.before();
    managementService=cassandraResource.getBean(ManagementService.class);
    if (!setupCalled) {
      managementService.setup();
      setupCalled=true;
    }
    applicationCreator=cassandraResource.getBean(ApplicationCreator.class);
    emf=cassandraResource.getBean(EntityManagerFactory.class);
    tokenService=cassandraResource.getBean(TokenService.class);
    providerFactory=cassandraResource.getBean(SignInProviderFactory.class);
    properties=cassandraResource.getBean("properties",Properties.class);
    smf=cassandraResource.getBean(ServiceManagerFactory.class);
    tomcatResource.before();
    uri=UriBuilder.fromUri("http://localhost/").port(tomcatResource.getPort()).build();
    ready=true;
    LOG.info("Test setup complete...");
  }
}
