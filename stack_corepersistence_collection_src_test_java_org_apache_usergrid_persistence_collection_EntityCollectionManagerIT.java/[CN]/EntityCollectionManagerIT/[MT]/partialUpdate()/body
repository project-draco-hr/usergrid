{
  CollectionScope context=new CollectionScopeImpl(new SimpleId("organization"),new SimpleId("testUpdate"),"testUpdate");
  Entity newEntity=new Entity(new SimpleId("testUpdate"));
  newEntity.setField(new StringField("testField","value"));
  EntityCollectionManager manager=factory.createCollectionManager(context);
  Observable<Entity> observable=manager.write(newEntity);
  Entity returned=observable.toBlockingObservable().lastOrDefault(null);
  assertNotNull("Returned has a uuid",returned.getId());
  assertNotNull("Version exists");
  newEntity.setField(new StringField("testField","NEWPARTIALUPDATEZOMG"));
  observable=manager.partialUpdate(newEntity);
  returned=observable.toBlockingObservable().lastOrDefault(null);
  assertNotNull("Returned has a uuid",returned.getId());
  assertEquals(newEntity.getField("testField"),returned.getField("testField"));
  assertNotNull("Version exists");
}
