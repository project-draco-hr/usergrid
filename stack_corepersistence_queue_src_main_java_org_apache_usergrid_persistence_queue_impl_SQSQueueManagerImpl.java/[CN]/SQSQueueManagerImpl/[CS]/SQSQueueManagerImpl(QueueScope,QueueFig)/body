{
  this.fig=fig;
  this.scope=scope;
  UsergridAwsCredentialsProvider ugProvider=new UsergridAwsCredentialsProvider();
  this.sqs=new AmazonSQSClient(ugProvider.getCredentials());
  Regions regions=Regions.fromName(fig.getRegion());
  Region region=Region.getRegion(regions);
  sqs.setRegion(region);
  try {
    smileFactory.delegateToTextual(true);
    mapper=new ObjectMapper(smileFactory);
    mapper.enable(SerializationFeature.INDENT_OUTPUT);
    mapper.enableDefaultTypingAsProperty(ObjectMapper.DefaultTyping.JAVA_LANG_OBJECT,"@class");
  }
 catch (  Exception e) {
    throw new RuntimeException("Error setting up mapper",e);
  }
}
