{
  try {
    Queue queue=urlMap.get(getName());
    if (queue.isEmpty()) {
      try {
        GetQueueUrlResult result=sqs.getQueueUrl(getName());
        queue=new Queue(result.getQueueUrl());
      }
 catch (      QueueDoesNotExistException queueDoesNotExistException) {
        queue=null;
      }
catch (      Exception e) {
        LOG.error("failed to get queue from service",e);
        throw e;
      }
      if (queue == null) {
        queue=createQueue();
      }
      urlMap.put(getName(),queue);
    }
    return queue;
  }
 catch (  ExecutionException ee) {
    throw new RuntimeException(ee);
  }
}
