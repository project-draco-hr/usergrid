{
  UsergridQuery usergridQuery=new UsergridQuery().ql(query).limit(limit).type(getCollection());
  UsergridResponse response=client.GET(usergridQuery);
  List<Entity> entities=new ArrayList<Entity>();
  if (response.getEntities() == null)   return entities;
  for (  UsergridEntity clientEntity : response.getEntities()) {
    Entity entity=new QueryEntity();
    entity.setUuid(UUID.fromString(clientEntity.getUuid()));
    entity.setType(clientEntity.getType());
    Map<String,JsonNode> values=clientEntity.getProperties();
    for (    String key : values.keySet()) {
      JsonNode node=values.get(key);
      if (node.isBoolean()) {
        entity.setProperty(key,node.asBoolean());
      }
 else       if (node.isInt()) {
        entity.setProperty(key,node.asInt());
      }
 else       if (node.isLong()) {
        entity.setProperty(key,node.asLong());
      }
 else       if (node.isDouble()) {
        entity.setProperty(key,node.asDouble());
      }
 else {
        entity.setProperty(key,node.asText());
      }
    }
    entities.add(entity);
  }
  return entities;
}
