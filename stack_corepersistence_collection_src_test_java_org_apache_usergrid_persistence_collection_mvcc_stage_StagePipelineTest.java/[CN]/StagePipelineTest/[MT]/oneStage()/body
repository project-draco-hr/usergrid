{
  Stage first=mock(Stage.class);
  StagePipeline pipeline=StagePipelineImpl.fromStages(first);
  assertSame("Correct stage returned",first,pipeline.first());
  Stage next=pipeline.nextStage(first);
  assertNull("No next stage",next);
}
