{
  WebTarget resource=getTarget(useToken);
  resource=addParametersToResource(resource,queryParameters);
  Invocation.Builder builder=resource.request().accept(MediaType.APPLICATION_JSON);
  if (useBasicAuthentication) {
    builder=builder.property(HttpAuthenticationFeature.HTTP_AUTHENTICATION_BASIC_USERNAME,"superuser").property(HttpAuthenticationFeature.HTTP_AUTHENTICATION_BASIC_PASSWORD,"superpassword");
  }
  GenericType<T> gt=new GenericType<>((Class)type);
  return builder.post(javax.ws.rs.client.Entity.json(entity),gt);
}
