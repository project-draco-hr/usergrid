{
  WebResource resource=getResource(useToken);
  if (queryParameters != null) {
    resource=addParametersToResource(resource,queryParameters);
  }
  if (useSupertoken) {
    HTTPBasicAuthFilter httpBasicAuthFilter=new HTTPBasicAuthFilter("superuser","superpassword");
    resource.addFilter(httpBasicAuthFilter);
  }
  GenericType<T> gt=new GenericType<>((Class)type);
  return resource.type(MediaType.APPLICATION_JSON_TYPE).accept(MediaType.APPLICATION_JSON).get(gt.getRawClass());
}
