{
  final CountDownLatch latch=new CountDownLatch(totalCount);
  for (int i=0; i < totalCount; i++) {
    final Action1<Scheduler.Inner> action=new Action1<Scheduler.Inner>(){
      @Override public void call(      final Scheduler.Inner inner){
        try {
          final String threadName=Thread.currentThread().getName();
          LOG.info("{} trying to acquire semaphore",threadName);
          semaphore.tryAcquire(timeout,TimeUnit.MILLISECONDS);
          LOG.info("{} has acquired sempahore",threadName);
          latch.countDown();
        }
 catch (        InterruptedException e) {
          throw new RuntimeException(e);
        }
      }
    }
;
    rxScheduler.schedule(action);
  }
  return latch;
}
