{
  final CountDownLatch latch=new CountDownLatch(totalCount);
  for (int i=0; i < totalCount; i++) {
    final Action0 action=new Action0(){
      @Override public void call(){
        try {
          final String threadName=Thread.currentThread().getName();
          LOG.info("{} trying to acquire semaphore",threadName);
          semaphore.acquire();
          LOG.info("{} has acquired sempahore",threadName);
          latch.countDown();
        }
 catch (        InterruptedException e) {
          throw new RuntimeException(e);
        }
      }
    }
;
    rxScheduler.schedule(action);
  }
  return latch;
}
