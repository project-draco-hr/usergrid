{
  final boolean externalTokensEnabled=Boolean.valueOf(properties.getProperty(USERGRID_EXTERNAL_SSO_ENABLED));
  if (externalTokensEnabled) {
    throw new IllegalArgumentException("Admin Users must activate via " + properties.getProperty(USERGRID_EXTERNAL_PROVIDER_URL));
  }
  UUID organizationId=null;
  try {
    TokenInfo tokenInfo=management.getActivationTokenInfoForAdminUser(token);
    organizationId=tokenInfo.getWorkflowOrgId();
    management.handleActivationTokenForAdminUser(user.getUuid(),tokenInfo);
    return handleViewable("activate",this,organizationId);
  }
 catch (  TokenException e) {
    return handleViewable("bad_activation_token",this,organizationId);
  }
catch (  RedirectionException e) {
    throw e;
  }
catch (  Exception e) {
    return handleViewable("error",e,organizationId);
  }
}
