{
  UUID id=UUIDUtils.newTimeUUID();
  String username1="username1" + id;
  String name1="name1" + id;
  String email1="email1" + id + "@usergrid.org";
  ApiResponse response=client.createUser(username1,name1,email1,"password");
  assertNull("Error was: " + response.getErrorDescription(),response.getError());
  UUID firstCreatedId=response.getEntities().get(0).getUuid();
  String name="pepperoni";
  Entity pizza=new Entity();
  pizza.setProperty("name",name);
  pizza.setType("pizza");
  response=client.createEntity(pizza);
  assertNull("Error was: " + response.getErrorDescription(),response.getError());
  UUID secondCreatedId=response.getEntities().get(0).getUuid();
  String path=String.format("/test-organization/test-app/users/%s/conn1/pizzas/%s",firstCreatedId,secondCreatedId);
  JsonNode node=mapper.readTree(resource().path(path).queryParam("access_token",access_token).accept(MediaType.APPLICATION_JSON).type(MediaType.APPLICATION_JSON_TYPE).post(String.class));
  assertEquals(secondCreatedId.toString(),getEntity(node,0).get("uuid").asText());
  path=String.format("/test-organization/test-app/users/%s/conn2/pizzas/%s",username1,name);
  node=mapper.readTree(resource().path(path).queryParam("access_token",access_token).accept(MediaType.APPLICATION_JSON).type(MediaType.APPLICATION_JSON_TYPE).post(String.class));
  assertEquals(secondCreatedId.toString(),getEntity(node,0).get("uuid").asText());
}
