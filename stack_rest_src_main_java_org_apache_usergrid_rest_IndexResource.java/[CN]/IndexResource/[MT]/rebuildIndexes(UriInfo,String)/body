{
  ApiResponse response=createApiResponse();
  response.setAction("rebuild indexes");
  final EntityManagerFactory.ProgressObserver po=new EntityManagerFactory.ProgressObserver(){
    @Override public void onProgress(    final EntityRef entity){
      logger.info("Indexing entity {}:{} ",entity.getType(),entity.getUuid());
    }
  }
;
  final Thread rebuild=new Thread(){
    @Override public void run(){
      logger.info("Rebuilding all indexes");
      try {
        emf.rebuildAllIndexes(po);
      }
 catch (      Exception e) {
        logger.error("Unable to rebuild indexes",e);
      }
      logger.info("Completed all indexes");
    }
  }
;
  rebuild.setName("Index rebuild all usergrid");
  rebuild.setDaemon(true);
  rebuild.start();
  response.setSuccess();
  return new JSONWithPadding(response,callback);
}
