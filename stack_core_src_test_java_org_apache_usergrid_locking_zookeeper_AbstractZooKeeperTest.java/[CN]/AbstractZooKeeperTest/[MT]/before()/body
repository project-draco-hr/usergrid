{
  System.setProperty("zkHost",ZOO_KEEPER_HOST);
  Thread zooThread=new Thread(){
    @Override public void run(){
      ServerConfig config=null;
      config=new ServerConfig(){
{
          clientPortAddress=new InetSocketAddress("localhost",20181);
          dataDir=tmpDir.getAbsolutePath() + File.separator + "zookeeper/server1/data";
          dataLogDir=dataDir;
        }
      }
;
      try {
        zkServer.runFromConfig(config);
        logger.info("ZOOKEEPER EXIT");
      }
 catch (      Throwable e) {
        logger.error("Error on zkServer.runFromConfig",e);
        throw new RuntimeException(e);
      }
    }
  }
;
  zooThread.setDaemon(true);
  zooThread.start();
  Thread.sleep(500);
  buildZooKeeper();
  logger.info("Zookeeper initialized.");
}
