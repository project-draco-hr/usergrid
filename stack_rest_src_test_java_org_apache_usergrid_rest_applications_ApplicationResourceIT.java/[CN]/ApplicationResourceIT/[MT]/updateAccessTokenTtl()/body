{
  JsonNode node=mapper.readTree(resource().path("/test-organization/test-app/token").queryParam("grant_type","password").queryParam("username","ed@anuff.com").queryParam("password","sesame").accept(MediaType.APPLICATION_JSON).get(String.class));
  String token=node.get("access_token").textValue();
  logNode(node);
  assertNotNull(token);
  long expires_in=node.get("expires_in").longValue();
  assertEquals(604800,expires_in);
  Map<String,String> payload=hashMap("accesstokenttl","31536000000");
  node=mapper.readTree(resource().path("/test-organization/test-app").queryParam("access_token",adminAccessToken).type(MediaType.APPLICATION_JSON_TYPE).put(String.class,payload));
  logNode(node);
  node=mapper.readTree(resource().path("/test-organization/test-app/token").queryParam("grant_type","password").queryParam("username","ed@anuff.com").queryParam("password","sesame").accept(MediaType.APPLICATION_JSON).get(String.class));
  assertEquals(31536000,node.get("expires_in").longValue());
  logNode(node);
}
