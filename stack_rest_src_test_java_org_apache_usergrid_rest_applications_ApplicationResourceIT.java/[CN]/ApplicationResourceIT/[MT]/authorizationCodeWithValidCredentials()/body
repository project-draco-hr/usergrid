{
  ApplicationInfo appInfo=setup.getMgmtSvc().getApplicationInfo("test-organization/test-app");
  String clientId=setup.getMgmtSvc().getClientIdForApplication(appInfo.getId());
  Form payload=new Form();
  payload.add("username","ed@anuff.com");
  payload.add("password","sesame");
  payload.add("response_type","code");
  payload.add("client_id",clientId);
  payload.add("scope","none");
  payload.add("redirect_uri","http://www.my_test.com");
  client().setFollowRedirects(false);
  Status status=null;
  try {
    String result=resource().path("/test-organization/test-app/authorize").type(MediaType.APPLICATION_FORM_URLENCODED_TYPE).accept(MediaType.TEXT_HTML).post(String.class,payload);
  }
 catch (  UniformInterfaceException uie) {
    status=uie.getResponse().getClientResponseStatus();
  }
  assertEquals(Status.TEMPORARY_REDIRECT,status);
}
