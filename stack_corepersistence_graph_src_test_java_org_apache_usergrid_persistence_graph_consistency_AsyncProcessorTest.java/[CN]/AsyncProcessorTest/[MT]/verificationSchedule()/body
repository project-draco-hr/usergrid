{
  final long timeout=500;
  final TestEvent event=new TestEvent();
  final AsynchronousEvent<TestEvent> asynchronousEvent=new AsynchronousEvent<TestEvent>(){
    @Override public TestEvent getEvent(){
      return event;
    }
    @Override public long getTimeout(){
      return timeout;
    }
  }
;
  final TimeoutQueue queue=mock(TimeoutQueue.class);
  AsyncProcessor asyncProcessor=constructProcessor(queue,null);
  when(queue.queue(event,timeout)).thenReturn(asynchronousEvent);
  AsynchronousEvent<TestEvent> returned=asyncProcessor.setVerification(event,timeout);
  assertSame(asynchronousEvent,returned);
}
