{
  migrationInfoSerialization.setStatusCode(StatusCode.RUNNING.status);
  final int migrationVersion=migration.getVersion();
  LOG.info("Running migration version {}",migrationVersion);
  observer.update(migrationVersion,"Starting migration");
  try {
    migration.migrate(applicationEntityGroup,observer).toBlocking().lastOrDefault(null);
  }
 catch (  Throwable throwable) {
    observer.failed(migrationVersion,"Exception thrown during migration",throwable);
    LOG.error("Unable to migrate to version {}.",migrationVersion,throwable);
    throw new RuntimeException(throwable);
  }
  if (observer.failed) {
    return;
  }
  migrationInfoSerialization.setVersion(migrationVersion);
  observer.update(migrationVersion,"Completed successfully");
}
