{
  Id mapOwner=new SimpleId(indexEdge.getNodeId().getUuid(),TYPE_APPLICATION);
  final MapScope ms=CpNamingUtils.getEntityTypeMapScope(mapOwner);
  MapManager mm=mapManagerFactory.createMapManager(ms);
  Set<String> defaultProperties;
  String collectionName=CpNamingUtils.getCollectionNameFromEdgeName(indexEdge.getEdgeName());
  CollectionSettingsCache collectionSettingsCache=collectionSettingsCacheFactory.getInstance(mm);
  Optional<Map<String,Object>> collectionIndexingSchema=collectionSettingsCache.getCollectionSettings(collectionName);
  if (collectionIndexingSchema.isPresent()) {
    Map jsonMapData=collectionIndexingSchema.get();
    Schema schema=Schema.getDefaultSchema();
    defaultProperties=schema.getRequiredProperties(collectionName);
    Object fields=jsonMapData.get("fields");
    if (fields != null && fields instanceof String && "all".equalsIgnoreCase(fields.toString())) {
      return Optional.absent();
    }
    if (fields != null && fields instanceof List) {
      defaultProperties.addAll((List)fields);
    }
  }
 else {
    return Optional.absent();
  }
  return Optional.of(defaultProperties);
}
