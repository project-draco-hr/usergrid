{
  String username="testCreateDuplicateOrgName" + UUIDUtils.newTimeUUID();
  String name=username;
  String password="password";
  String orgName=username;
  String email=username + "@usergrid.com";
  Organization orgPayload=new Organization(orgName,username,email,name,password,null);
  Organization orgCreatedResponse=clientSetup.getRestClient().management().orgs().post(orgPayload);
  this.refreshIndex();
  assertNotNull(orgCreatedResponse);
  Token tokenPayload=new Token("password",username,password);
  Token tokenReturned=clientSetup.getRestClient().management().token().post(tokenPayload);
  assertNotNull(tokenReturned);
  Organization orgTestDuplicatePayload=new Organization(orgName,username + "test",email + "test",name + "test",password,null);
  try {
    clientSetup.getRestClient().management().orgs().post(orgTestDuplicatePayload);
    fail("Should not have been able to create duplicate organization");
  }
 catch (  UniformInterfaceException ex) {
    errorParse(400,duplicateUniquePropertyExistsErrorMessage,ex);
  }
  tokenPayload=new Token("password",username + "test",password);
  Token tokenError=null;
  try {
    tokenError=clientSetup.getRestClient().management().token().post(tokenPayload);
    fail("Should not have created user");
  }
 catch (  UniformInterfaceException ex) {
    errorParse(400,invalidGrantErrorMessage,ex);
  }
  assertNull(tokenError);
}
