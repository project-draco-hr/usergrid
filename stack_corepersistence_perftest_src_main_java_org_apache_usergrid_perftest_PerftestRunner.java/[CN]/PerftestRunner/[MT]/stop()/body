{
synchronized (lock) {
    stopSignal=true;
    boolean anyAlive=false;
    do {
      anyAlive|=threadsRunning();
    }
 while (anyAlive);
    running=false;
    stopTime=System.nanoTime();
    needsReset=true;
  }
}
