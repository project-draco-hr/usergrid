{
synchronized (lock) {
    stopSignal=true;
    try {
      while (executorService.awaitTermination(sleepToStop.get(),TimeUnit.MILLISECONDS)) {
        LOG.info("woke up: running = {}",PerftestRunner.this.running);
      }
    }
 catch (    InterruptedException e) {
      LOG.error("Got interrupted while monitoring executor service.",e);
    }
    running=false;
    stats.stop();
    stopTime=System.nanoTime();
    needsReset=true;
  }
}
