{
  int delay=test.getDelayBetweenCalls();
  while ((!stopSignal) && (stats.getCallCount() < test.getCallCount())) {
    long startTime=System.nanoTime();
    test.call();
    long endTime=System.nanoTime();
    stats.callOccurred(test,startTime,endTime,TimeUnit.NANOSECONDS);
    if (delay > 0) {
      try {
        Thread.sleep(delay);
      }
 catch (      InterruptedException e) {
        LOG.error("Thread was interrupted.",e);
      }
    }
synchronized (lock) {
      lock.notifyAll();
    }
  }
}
