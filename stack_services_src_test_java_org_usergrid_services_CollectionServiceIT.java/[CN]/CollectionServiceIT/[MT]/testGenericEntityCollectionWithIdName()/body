{
  UUID applicationId=createApplication(TEST_ORGANIZATION,"testCatsDogs");
  ServiceManager sm=setup.getSmf().getServiceManager(applicationId);
  Map<String,Object> properties=new LinkedHashMap<String,Object>();
  properties.put("name","Tom");
  Entity cat=testRequest(sm,ServiceAction.POST,1,properties,"cats").getEntity();
  assertNotNull(cat);
  testRequest(sm,ServiceAction.GET,1,null,"cats","Tom");
  properties=new LinkedHashMap<String,Object>();
  properties.put("name","Danny");
  Entity dog=testRequest(sm,ServiceAction.POST,1,properties,"dogs").getEntity();
  assertNotNull(dog);
  try {
    testRequest(sm,ServiceAction.GET,0,null,"cats",dog.getUuid());
    Assert.fail();
  }
 catch (  UnexpectedEntityTypeException uee) {
  }
  try {
    testRequest(sm,ServiceAction.GET,0,null,"cats","Danny");
    Assert.fail();
  }
 catch (  ServiceResourceNotFoundException srnfe) {
  }
  properties=new LinkedHashMap<String,Object>();
  properties.put("color","black");
  try {
    testRequest(sm,ServiceAction.POST,0,properties,"cats",dog.getUuid());
    Assert.fail();
  }
 catch (  UnexpectedEntityTypeException uee) {
  }
  try {
    testRequest(sm,ServiceAction.POST,0,properties,"cats","Danny");
    Assert.fail();
  }
 catch (  ServiceResourceNotFoundException srnfe) {
  }
  try {
    testRequest(sm,ServiceAction.PUT,0,properties,"cats",dog.getUuid());
    Assert.fail();
  }
 catch (  UnexpectedEntityTypeException uee) {
  }
  try {
    testRequest(sm,ServiceAction.DELETE,0,null,"cats",dog.getUuid());
    Assert.fail();
  }
 catch (  UnexpectedEntityTypeException uee) {
  }
  try {
    testRequest(sm,ServiceAction.DELETE,0,null,"cats","Danny");
    Assert.fail();
  }
 catch (  ServiceResourceNotFoundException srnfe) {
  }
  ServiceResults results=testRequest(sm,ServiceAction.PUT,1,properties,"cats","99999990-600c-11e2-b414-14109fd49581");
  Entity entity=results.getEntity();
  Assert.assertEquals(entity.getUuid().toString(),"99999990-600c-11e2-b414-14109fd49581");
  properties.remove("name");
  results=testRequest(sm,ServiceAction.PUT,1,properties,"cats","Danny");
  entity=results.getEntity();
  Assert.assertEquals(entity.getName(),"danny");
  properties.put("name","Danny2");
  results=testRequest(sm,ServiceAction.PUT,1,properties,"cats","Danny2");
  entity=results.getEntity();
  Assert.assertEquals(entity.getName(),"Danny2");
  properties.put("name","Jimmy");
  results=testRequest(sm,ServiceAction.PUT,1,properties,"cats","Danny3");
  entity=results.getEntity();
  Assert.assertEquals(entity.getName(),"danny3");
}
