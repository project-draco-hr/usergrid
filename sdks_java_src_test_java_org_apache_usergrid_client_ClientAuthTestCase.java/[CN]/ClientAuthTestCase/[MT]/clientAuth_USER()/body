{
  Usergrid.setAuthMode(UsergridAuthMode.USER);
  UsergridUserAuth userAuth=new UsergridUserAuth(SDKTestConfiguration.APP_UserName,SDKTestConfiguration.APP_Password);
  UsergridResponse response=Usergrid.authenticateUser(userAuth);
  assertTrue("response status is OK",response.ok());
  assertNull("no error thrown",response.getResponseError());
  assertTrue("appAuth.isValidToken should be true",userAuth.isValidToken());
  assertNotNull("should have a token",userAuth.getAccessToken());
  assertNotNull("should have an expiry",userAuth.getExpiry());
  UsergridUser currentUser=Usergrid.getCurrentUser();
  assertNotNull("client.currentUser should not be null",currentUser);
  assertNotNull("client.currentUser().getUserAuth() should not be null",currentUser.getUserAuth());
  assertEquals("client.currentUser().userAuth should be the same as userAuth",currentUser.getUserAuth(),userAuth);
  assertTrue("should have a token that is not empty",userAuth.getAccessToken().length() > 0);
  assertTrue("client.currentUser().userAuth.getExpiry() should be set to a future date",userAuth.getExpiry() > System.currentTimeMillis());
  assertEquals("client.authForRequests() should be the same as userAuth",Usergrid.authForRequests(),userAuth);
}
