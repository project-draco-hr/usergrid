{
synchronized (lock) {
    if (callCount.get() > test.getCallCount() - 1) {
      return callCount.get();
    }
    if (this.units.equals(units)) {
      long time=endTime - startTime;
      totalTime+=time;
      maxTime=Math.max(maxTime,time);
      minTime=Math.min(minTime,time);
      int numCalls=callCount.incrementAndGet();
      StringBuilder sb=new StringBuilder();
      sb.append(numCalls).append(" ").append(startTime).append(" ").append(endTime);
      log.debug(sb.toString());
      meanTime=totalTime / numCalls;
      return numCalls;
    }
 else {
      throw new RuntimeException("Time unit corrections have not been implemented.");
    }
  }
}
