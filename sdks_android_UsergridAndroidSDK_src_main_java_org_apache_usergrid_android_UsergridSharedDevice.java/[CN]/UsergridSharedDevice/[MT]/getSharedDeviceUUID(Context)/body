{
  if (sharedDevice != null && sharedDevice.getUuid() != null) {
    return sharedDevice.getUuid();
  }
  String androidId=Settings.Secure.getString(context.getContentResolver(),Settings.Secure.ANDROID_ID);
  UUID uuid;
  try {
    if (!"9774d56d682e549c".equals(androidId)) {
      uuid=UUID.nameUUIDFromBytes(androidId.getBytes("utf8"));
    }
 else {
      final String deviceId=((TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE)).getDeviceId();
      uuid=deviceId != null ? UUID.nameUUIDFromBytes(deviceId.getBytes("utf8")) : generateDeviceUuid(context);
    }
  }
 catch (  Exception ignored) {
    uuid=UUID.randomUUID();
  }
  return uuid.toString();
}
