{
  addNewUserButton.addClickListener(new Button.ClickListener(){
    public void buttonClick(    Button.ClickEvent event){
      userContainer.removeAllContainerFilters();
      Object contactId=userContainer.addItemAt(0);
      userList.getContainerProperty(contactId,USERNAME).setValue("Username");
      userList.getContainerProperty(contactId,PASSWORD).setValue("Password");
      userList.select(contactId);
    }
  }
);
  removeUserButton.addClickListener(new Button.ClickListener(){
    public void buttonClick(    Button.ClickEvent event){
      Object contactId=userList.getValue();
      userList.removeItem(contactId);
      String username=(String)userList.getItem(contactId).getItemProperty(USERNAME).getValue();
      userDao.delete(username);
    }
  }
);
  closeButton.addClickListener(new Button.ClickListener(){
    public void buttonClick(    Button.ClickEvent event){
      close();
    }
  }
);
  saveButton.addClickListener(new Button.ClickListener(){
    public void buttonClick(    Button.ClickEvent event){
      for (      Object itemId : userList.getItemIds()) {
        String username=(String)userList.getItem(itemId).getItemProperty(USERNAME).getValue();
        String password=(String)userList.getItem(itemId).getItemProperty(PASSWORD).getValue();
        String instanceType=(String)userList.getItem(itemId).getItemProperty(INSTANCE_TYPE).getValue();
        String accessKey=(String)userList.getItem(itemId).getItemProperty(ACCESS_KEY).getValue();
        String secretKey=(String)userList.getItem(itemId).getItemProperty(SECRET_KEY).getValue();
        String imageId=(String)userList.getItem(itemId).getItemProperty(IMAGE_ID).getValue();
        String keyPairName=(String)userList.getItem(itemId).getItemProperty(KEY_PAIR_NAME).getValue();
        try {
          userDao.save(new User(username,password));
          BasicProviderParams pParams=new BasicProviderParams(username,instanceType,accessKey,secretKey,imageId,keyPairName);
          ProviderParams old=providerParamsDao.getByUser(username);
          if (old != null) {
            pParams.setKeys(old.getKeys());
          }
          providerParamsDao.save(pParams);
        }
 catch (        Exception e) {
          LOG.error("Error while saving a user: ",e);
        }
      }
      close();
    }
  }
);
}
