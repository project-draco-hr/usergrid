{
  String key=metricClass.getName() + klass.getName() + name;
  Metric metric=hashMap.get(key);
  if (metric == null) {
    if (metricClass == Histogram.class) {
      metric=this.getRegistry().histogram(MetricRegistry.name(klass,name));
    }
    if (metricClass == Timer.class) {
      metric=this.getRegistry().timer(MetricRegistry.name(klass,name));
    }
    if (metricClass == Meter.class) {
      metric=this.getRegistry().meter(MetricRegistry.name(klass,name));
    }
    if (metricClass == Counter.class) {
      metric=this.getRegistry().counter(MetricRegistry.name(klass,name));
    }
    hashMap.put(key,metric);
  }
  return (T)metric;
}
