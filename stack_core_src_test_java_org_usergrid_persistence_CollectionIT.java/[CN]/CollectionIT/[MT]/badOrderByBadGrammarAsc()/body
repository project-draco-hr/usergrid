{
  UUID applicationId=setup.createApplication("testOrganization","badOrderByBadGrammarAsc");
  assertNotNull(applicationId);
  EntityManager em=setup.getEmf().getEntityManager(applicationId);
  assertNotNull(em);
  String s="select * where name = 'bob' order by asc";
  String error=null;
  String entityType=null;
  String propertyName=null;
  try {
    em.searchCollection(em.getApplicationRef(),"users",Query.fromQL(s));
    fail("I should throw an exception");
  }
 catch (  NoIndexException nie) {
    error=nie.getMessage();
    entityType=nie.getEntityType();
    propertyName=nie.getPropertyName();
  }
  assertEquals("Entity 'user' with property named '' is not indexed.  You cannot use the this field in queries.",error);
  assertEquals("user",entityType);
  assertEquals("",propertyName);
}
