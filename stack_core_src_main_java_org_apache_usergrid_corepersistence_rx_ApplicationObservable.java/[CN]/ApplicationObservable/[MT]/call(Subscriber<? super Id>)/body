{
  emit(generateApplicationId(NamingUtils.DEFAULT_APPLICATION_ID),subscriber);
  emit(generateApplicationId(NamingUtils.MANAGEMENT_APPLICATION_ID),subscriber);
  emit(generateApplicationId(NamingUtils.SYSTEM_APP_ID),subscriber);
  ApplicationScope appScope=getApplicationScope(NamingUtils.SYSTEM_APP_ID);
  GraphManager gm=graphManagerFactory.createEdgeManager(appScope);
  String edgeType=CpNamingUtils.getEdgeTypeFromCollectionName("appinfos");
  Id rootAppId=appScope.getApplication();
  Observable<Edge> edges=gm.loadEdgesFromSource(new SimpleSearchByEdgeType(rootAppId,edgeType,Long.MAX_VALUE,SearchByEdgeType.Order.DESCENDING,null));
  final int count=edges.doOnNext(new Action1<Edge>(){
    @Override public void call(    final Edge edge){
      Id applicationId=edge.getTargetNode();
      logger.debug("Emitting applicationId of {}",applicationId);
      emit(applicationId,subscriber);
    }
  }
).count().toBlocking().last();
  logger.debug("Emitted {} application ids",count);
}
