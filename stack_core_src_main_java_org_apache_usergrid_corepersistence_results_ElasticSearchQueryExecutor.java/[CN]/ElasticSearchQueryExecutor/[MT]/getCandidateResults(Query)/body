{
  final Optional<Integer> cursor=query.getOffset();
  final String queryToExecute=query.getQl().or("select *");
  CandidateResults results=cursor.isPresent() ? entityIndex.search(indexScope,types,queryToExecute,query.getLimit(),cursor.get()) : entityIndex.search(indexScope,types,queryToExecute,query.getLimit());
  return results;
}
