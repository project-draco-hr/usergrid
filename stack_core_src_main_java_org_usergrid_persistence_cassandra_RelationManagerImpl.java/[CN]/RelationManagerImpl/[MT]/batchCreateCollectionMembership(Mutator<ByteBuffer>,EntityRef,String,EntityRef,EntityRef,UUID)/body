{
  long timestamp=getTimestampInMicros(timestampUuid);
  if (membershipRef == null) {
    membershipRef=new SimpleCollectionRef(ownerRef,collectionName,itemRef);
  }
  Map<String,Object> properties=new TreeMap<String,Object>(CASE_INSENSITIVE_ORDER);
  properties.put(PROPERTY_TYPE,membershipRef.getType());
  properties.put(PROPERTY_OWNER,ownerRef.getUuid());
  properties.put(PROPERTY_OWNER_TYPE,ownerRef.getType());
  properties.put(PROPERTY_COLLECTION_NAME,collectionName);
  properties.put(PROPERTY_ITEM,itemRef.getUuid());
  properties.put(PROPERTY_ITEM_TYPE,itemRef.getType());
  em.batchCreate(batch,membershipRef.getType(),null,properties,membershipRef.getUuid(),timestampUuid);
  addInsertToMutator(batch,ENTITY_COMPOSITE_DICTIONARIES,key(membershipRef.getUuid(),Schema.DICTIONARY_CONTAINER_ENTITIES),asList(ownerRef.getType(),collectionName,ownerRef.getUuid()),membershipRef.getUuid(),timestamp);
}
