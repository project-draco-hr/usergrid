{
  Preconditions.checkNotNull(clazz,"Class must be specified");
  if (message == null) {
    return null;
  }
  if (!clazz.isInstance(message)) {
    throw new ClassCastException("Message must be an instance of class " + clazz + ".  However it was of type '"+ message.getClass()+ "'");
  }
  return (T)message;
}
