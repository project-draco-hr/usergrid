{
  String org=clientSetup.getOrganizationName();
  String app=clientSetup.getAppName();
  logger.debug("\n\nImport into new app {}\n",app);
  Entity importPayload=new Entity(new HashMap<String,Object>(){
{
      put("properties",new HashMap<String,Object>(){
{
          put("storage_provider","s3");
          put("storage_info",new HashMap<String,Object>(){
{
              put("s3_key",System.getProperty("s3_key"));
              put("s3_access_id",System.getProperty("s3_access_id"));
              put("bucket_location",bucketName);
            }
          }
);
        }
      }
);
    }
  }
);
  Entity importEntity=this.management().orgs().organization(org).app().addToPath(app).addToPath("import").post(importPayload);
  int maxRetries=120;
  int retries=0;
  while (retries++ < maxRetries) {
    Entity importGet=this.management().orgs().organization(org).app().addToPath(app).addToPath("import").addToPath(importEntity.getUuid().toString()).get();
    if (importGet.get("state").equals("FINISHED")) {
      break;
    }
    logger.debug("Waiting for import...");
    Thread.sleep(1000);
  }
  refreshIndex();
  return importEntity;
}
