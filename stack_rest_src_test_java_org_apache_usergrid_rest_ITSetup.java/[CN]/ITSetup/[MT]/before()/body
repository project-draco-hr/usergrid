{
synchronized (springResource) {
    super.before();
    emf=springResource.getBean(EntityManagerFactory.class);
    smf=springResource.getBean(ServiceManagerFactory.class);
    tokenService=springResource.getBean(TokenService.class);
    providerFactory=springResource.getBean(SignInProviderFactory.class);
    applicationCreator=springResource.getBean(ApplicationCreator.class);
    tomcatResource.setCassandraPort(cassandraResource.getPort());
    tomcatResource.setElasticSearchPort(elasticSearchResource.getPort());
    tomcatResource.before();
    uri=UriBuilder.fromUri("http://localhost/").port(tomcatResource.getPort()).build();
    ready=true;
    LOG.info("Test setup complete...");
  }
}
