{
  if ((entities != null) && (sorts.size() > 0)) {
    logger.info("Performing in-memory sort of {} entities",entities.size());
    ComparatorChain chain=new ComparatorChain();
    for (    SortPredicate sort : sorts) {
      chain.addComparator(new EntityPropertyComparator(sort.getPropertyName()),sort.getDirection() == DESCENDING);
    }
    Collections.sort(entities,chain);
  }
  return entities;
}
