{
  Instant timeInstance=Instant.now();
  Long epoch=timeInstance.toEpochMilli();
  Map<String,Object> schemaMap=new HashMap<>();
  schemaMap.put("lastUpdated",epoch);
  schemaMap.put("lastUpdateBy",owner);
  MapManager mm=getMapManagerForTypes();
  IndexSchemaCache indexSchemaCache=indexSchemaCacheFactory.getInstance(mm);
  java.util.Optional<String> collectionIndexingSchema=indexSchemaCache.getCollectionSchema(collectionName);
  String jsonSchemaMap=null;
  if (collectionIndexingSchema.isPresent()) {
    jsonSchemaMap=collectionIndexingSchema.get();
  }
  if (jsonSchemaMap != null) {
    Map jsonMapData=(Map)JsonUtils.parse(jsonSchemaMap);
    schemaMap.put("lastReindexed",jsonMapData.get("lastReindexed"));
  }
 else {
    schemaMap.put("lastReindexed",0);
  }
  ArrayList<String> fieldProperties=(ArrayList<String>)properties.get("fields");
  if (fieldProperties.contains("*")) {
    ArrayList<String> wildCardArrayList=new ArrayList<>();
    wildCardArrayList.add("*");
    schemaMap.put("fields",wildCardArrayList);
  }
 else {
    schemaMap.putAll(properties);
  }
  indexSchemaCache.putCollectionSchema(collectionName,JsonUtils.mapToJsonString(schemaMap));
  return schemaMap;
}
