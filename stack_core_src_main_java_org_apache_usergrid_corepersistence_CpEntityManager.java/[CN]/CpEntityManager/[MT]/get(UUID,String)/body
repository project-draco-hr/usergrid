{
  Id id=new SimpleId(entityId,type);
  String collectionName=Schema.defaultCollectionName(type);
  CollectionScope applicationScope=emf.getApplicationScope(applicationId);
  CollectionScope collectionScope=new CollectionScopeImpl(applicationScope.getOrganization(),applicationScope.getOwner(),collectionName);
  EntityCollectionManager ecm=ecmf.createCollectionManager(collectionScope);
  logger.debug("Loading entity {} type {} to {}",new String[]{entityId.toString(),type,collectionName});
  org.apache.usergrid.persistence.model.entity.Entity cpEntity=ecm.load(id).toBlockingObservable().last();
  Entity entity=new DynamicEntity(type,cpEntity.getId().getUuid());
  entity.setUuid(cpEntity.getId().getUuid());
  Map<String,Object> entityMap=EntityMapUtils.toMap(cpEntity);
  entity.addProperties(entityMap);
  return entity;
}
