{
  logger.debug("Indexing into connection {} source {}:{} target {}:{}",new Object[]{connType,sourceEntity.getId().getType(),sourceEntity.getId().getUuid(),targetEntity.getId().getType(),targetEntity.getId().getUuid()});
  final EntityIndex ei=getManagerCache().getEntityIndex(applicationScope);
  final EntityIndexBatch batch=ei.createBatch();
  IndexScope indexScope=new IndexScopeImpl(applicationScope.getApplication(),sourceEntity.getId(),CpEntityManager.getConnectionScopeName(targetEntityType,connType));
  batch.index(indexScope,targetEntity);
  IndexScope allTypesIndexScope=new IndexScopeImpl(applicationScope.getApplication(),sourceEntity.getId(),ALL_TYPES);
  batch.index(allTypesIndexScope,targetEntity);
  batch.execute();
}
