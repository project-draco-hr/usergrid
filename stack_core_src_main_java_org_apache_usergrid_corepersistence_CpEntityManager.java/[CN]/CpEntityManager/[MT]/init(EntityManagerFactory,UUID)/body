{
  Preconditions.checkNotNull(emf,"emf must not be null");
  Preconditions.checkNotNull(applicationId,"applicationId must not be null");
  this.emf=(CpEntityManagerFactory)emf;
  this.managerCache=this.emf.getManagerCache();
  this.applicationId=applicationId;
  applicationScope=CpNamingUtils.getApplicationScope(applicationId);
  this.cass=this.emf.getCassandraService();
  this.counterUtils=this.emf.getCounterUtils();
  this.metricsFactory=this.emf.getMetricsFactory();
  this.aggCounterTimer=this.metricsFactory.getTimer(CpEntityManager.class,"cp.entity.get.aggregate.counters.timer");
  this.entCreateTimer=this.metricsFactory.getTimer(CpEntityManager.class,"cp.entity.create.timer");
  this.skipAggregateCounters=false;
}
