{
  UUID id1=UUIDUtils.minTimeUUID(1);
  UUID id2=UUIDUtils.minTimeUUID(2);
  UUID id3=UUIDUtils.minTimeUUID(3);
  UUID id4=UUIDUtils.minTimeUUID(4);
  InOrderIterator first=new InOrderIterator(100);
  first.add(id1);
  first.add(id2);
  first.add(id3);
  first.add(id4);
  IntersectionIterator intersection=new IntersectionIterator(100);
  intersection.addIterator(first);
  assertTrue(intersection.hasNext());
  Set<UUID> page=intersection.next();
  Iterator<UUID> union=page.iterator();
  assertEquals(id1,union.next());
  assertTrue(union.hasNext());
  assertEquals(id2,union.next());
  assertTrue(union.hasNext());
  assertEquals(id3,union.next());
  assertTrue(union.hasNext());
  assertEquals(id4,union.next());
  assertFalse(union.hasNext());
}
