{
  UUID applicationId=setup.createApplication("testOrganization","testRedefineTerms");
  EntityManager em=setup.getEmf().getEntityManager(applicationId);
  Map<String,Object> properties=new LinkedHashMap<String,Object>();
  properties.put("username","edanuff");
  properties.put("email","ed@anuff.com");
  em.create("user",properties);
  String s="select {name: username, email: email} where username = 'edanuff'";
  Query query=Query.fromQL(s);
  Results r=em.searchCollection(em.getApplicationRef(),"users",query);
  assertTrue(r.size() == 1);
  List<Object> sr=query.getSelectionResults(r);
  assertTrue(sr.size() == 1);
  Map firstResult=(Map)sr.get(0);
  assertTrue("edanuff".equals(firstResult.get("name")));
  assertTrue("ed@anuff.com".equals(firstResult.get("email")));
}
