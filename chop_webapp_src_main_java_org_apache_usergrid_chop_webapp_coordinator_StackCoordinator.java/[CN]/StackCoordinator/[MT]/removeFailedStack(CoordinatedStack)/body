{
  if (stack == null || stack.getSetupState() != SetupStackState.SetupFailed) {
    LOG.debug("Setup didn't fail for given stack, so not removed");
    return;
  }
  registeredStacks.remove(stack.hashCode());
  setupStackThreads.remove(stack);
}
