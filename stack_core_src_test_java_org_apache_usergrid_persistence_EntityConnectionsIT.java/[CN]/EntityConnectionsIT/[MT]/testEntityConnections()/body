{
  LOG.info("\n\nEntityConnectionsIT.testEntityConnections\n");
  UUID applicationId=setup.createApplication("EntityConnectionsIT","testEntityConnections");
  assertNotNull(applicationId);
  EntityManager em=setup.getEmf().getEntityManager(applicationId);
  assertNotNull(em);
  LOG.info("\n\nCreating Cat entity A with name of Dylan\n");
  Map<String,Object> properties=new LinkedHashMap<String,Object>();
  properties.put("name","Dylan");
  Entity catA=em.create("cat",properties);
  assertNotNull(catA);
  LOG.info("\n\nEntity A created with id " + catA.getUuid() + "\n");
  LOG.info("\n\nLooking up cat with id " + catA.getUuid() + "\n");
  Entity cat=em.get(catA);
  assertNotNull(cat);
  LOG.info("\n\nFound entity " + cat.getUuid() + " of type "+ cat.getType()+ " with name "+ cat.getProperty("name")+ "\n");
  LOG.info("\n\nCreating cat entity B with name of Nico\n");
  properties=new LinkedHashMap<String,Object>();
  properties.put("name","Nico");
  Entity catB=em.create("cat",properties);
  assertNotNull(catB);
  LOG.info("\n\nEntity B created with id " + catB.getUuid() + "\n");
  LOG.info("\n\nCreating award entity with name of 'best cat'\n");
  properties=new LinkedHashMap<String,Object>();
  properties.put("name","Best Cat Ever");
  Entity awardA=em.create("award",properties);
  assertNotNull(awardA);
  LOG.info("\n\nEntity created with id " + awardA.getUuid() + "\n");
  LOG.info("\n\nConnecting " + catA.getUuid() + " \"likes\" "+ catB.getUuid()+ "\n");
  em.createConnection(catA,"likes",catB);
  LOG.info("\n\nConnecting " + awardA.getUuid() + " \"awarded\" "+ catB.getUuid()+ "\n");
  em.createConnection(awardA,"awarded",catB);
  em.refreshIndex();
  LOG.info("Find all connections for cat A: " + catA.getUuid());
  testEntityConnections(applicationId,catA.getUuid(),"cat",1);
  LOG.info("Find all connections for award A: " + awardA.getUuid());
  testEntityConnections(applicationId,awardA.getUuid(),"award",1);
  LOG.info("\n\nConnecting " + awardA.getUuid() + " \"awarded\" "+ catA.getUuid()+ "\n");
  em.createConnection(awardA,"awarded",catA);
  em.refreshIndex();
  testEntityConnections(applicationId,catA.getUuid(),"cat",1);
  testEntityConnections(applicationId,awardA.getUuid(),"award",2);
  testApplicationCollections(applicationId,"cats",2);
  testApplicationCollections(applicationId,"awards",1);
  LOG.info("\n\nSearching Award A for recipients with the name Dylan\n");
}
