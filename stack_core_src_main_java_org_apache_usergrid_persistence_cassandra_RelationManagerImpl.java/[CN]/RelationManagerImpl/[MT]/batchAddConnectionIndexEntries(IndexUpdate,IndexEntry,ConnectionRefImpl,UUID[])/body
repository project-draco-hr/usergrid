{
  final UUID entityId=connection.getConnectedEntityId();
  final String bucket=indexBucketLocator.getBucket(entityId);
  Object property_index_key=key(index_keys[ConnectionRefImpl.ALL],INDEX_CONNECTIONS,entry.getPath(),bucket);
  Object entity_type_prop_index_key=key(index_keys[ConnectionRefImpl.BY_ENTITY_TYPE],INDEX_CONNECTIONS,entry.getPath(),bucket);
  Object connection_type_prop_index_key=key(index_keys[ConnectionRefImpl.BY_CONNECTION_TYPE],INDEX_CONNECTIONS,entry.getPath(),bucket);
  Object connection_type_and_entity_type_prop_index_key=key(index_keys[ConnectionRefImpl.BY_CONNECTION_AND_ENTITY_TYPE],INDEX_CONNECTIONS,entry.getPath(),bucket);
  addInsertToMutator(indexUpdate.getBatch(),ENTITY_INDEX,property_index_key,entry.getIndexComposite(connection.getConnectedEntityId(),connection.getConnectionType(),connection.getConnectedEntityType()),connection.getUuid(),indexUpdate.getTimestamp());
  addInsertToMutator(indexUpdate.getBatch(),ENTITY_INDEX,entity_type_prop_index_key,entry.getIndexComposite(connection.getConnectedEntityId(),connection.getConnectionType()),connection.getUuid(),indexUpdate.getTimestamp());
  addInsertToMutator(indexUpdate.getBatch(),ENTITY_INDEX,connection_type_prop_index_key,entry.getIndexComposite(connection.getConnectedEntityId(),connection.getConnectedEntityType()),connection.getUuid(),indexUpdate.getTimestamp());
  addInsertToMutator(indexUpdate.getBatch(),ENTITY_INDEX,connection_type_and_entity_type_prop_index_key,entry.getIndexComposite(connection.getConnectedEntityId()),connection.getUuid(),indexUpdate.getTimestamp());
  return indexUpdate.getBatch();
}
