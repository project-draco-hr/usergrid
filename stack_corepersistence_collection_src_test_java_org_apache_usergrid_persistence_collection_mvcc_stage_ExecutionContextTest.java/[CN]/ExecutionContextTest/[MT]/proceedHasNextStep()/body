{
  CollectionContext collectionContext=mock(CollectionContext.class);
  StagePipeline pipeline=mock(StagePipeline.class);
  ExecutionStage firstExecutionStage=mock(ExecutionStage.class);
  ExecutionStage secondExecutionStage=mock(ExecutionStage.class);
  when(pipeline.first()).thenReturn(firstExecutionStage);
  when(pipeline.nextStage(same(firstExecutionStage))).thenReturn(secondExecutionStage);
  ExecutionContext executionContext=new ExecutionContextImpl(pipeline,collectionContext);
  Object test=new Object();
  executionContext.execute(test);
  executionContext.proceed();
  verify(secondExecutionStage).performStage(same(executionContext));
}
