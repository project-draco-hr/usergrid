{
  EdgeManager em=emf.createEdgeManager(scope);
  Edge edge=createEdge("source","test","target");
  Edge last=em.writeEdge(edge).toBlockingObservable().last();
  assertEquals(edge,last);
  Id sourceNode=edge.getSourceNode();
  Id targetNode=edge.getTargetNode();
  UUID version=UUIDGenerator.newTimeUUID();
  EdgeEvent<Id> deleteEvent=new EdgeEvent<Id>(scope,version,sourceNode);
  EdgeEvent<Id> event=deleteListener.receive(deleteEvent).toBlockingObservable().lastOrDefault(null);
  assertNull("Mark was not set, no delete should be executed",event);
  deleteEvent=new EdgeEvent<Id>(scope,version,targetNode);
  event=deleteListener.receive(deleteEvent).toBlockingObservable().lastOrDefault(null);
  assertNull("Mark was not set, no delete should be executed",event);
}
